<!DOCTYPE html>
<html lang="en" data-theme="dark">



<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>File Explorer - GitDev</title>

  <link rel="manifest" href="https://clockblocked.github.io/bytes/webApp/manifest.json">

  <!-- Global CSS -->
  <link rel="stylesheet" href="https://clockblocked.github.io/bytes/styleSheets/global/styles.css" />

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- CodeMirror core + themes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror-one-dark-theme@1.1.1/one-dark.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/foldgutter.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>

  <!-- CodeMirror modes -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/markdown/markdown.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/php/php.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/sql/sql.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/yaml/yaml.min.js"></script>

  <!-- CodeMirror addons -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/search/searchcursor.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/selection/active-line.min.js"></script>

  <!-- Code folding -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/foldcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/foldgutter.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/brace-fold.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/comment-fold.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/indent-fold.min.js"></script>

  <!-- Prism (only if you actually use it for static highlighting) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

  <!-- Additional Libraries -->
  <script src="https://unpkg.com/@floating-ui/dom@1.5.4/dist/floating-ui.dom.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  
  
  
  
  
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            github: {
              'canvas-default': '#22272e',
              'tableHeader': '#2d333b',
              'canvas-overlay': '#2d333b',
              'canvas-inset': '#1c2128',
              'canvas-subtle': '#2d333b',
              'border-default': '#444c56',
              'border-muted': '#373e47',
              'neutral-emphasis': '#768390',
              'neutral-muted': '#636e7b',
              'fg-default': '#adbac7',
              'fg-muted': '#768390',
              'fg-subtle': '#545d68',
              'accent-fg': '#539bf5',
              'accent-emphasis': '#4184e4',
              'success-fg': '#57ab5a',
              'danger-fg': '#e5534b',
              'warning-fg': '#c69026',
              'btn-primary-bg': '#347d39',
              'btn-primary-hover': '#46954a',
              'btn-secondary-bg': '#373e47',
              'btn-secondary-hover': '#444c56'
            }
          },
          animation: {
            'fade-in': 'fadeIn 0.2s ease-out',
            'fade-out': 'fadeOut 0.2s ease-in',
            'slide-up': 'slideUp 0.3s ease-out',
            'slide-down': 'slideDown 0.3s ease-out',
            'scale-in': 'scaleIn 0.2s ease-out',
            'spin-slow': 'spin 1.5s linear infinite',
            'pulse-soft': 'pulseSoft 2s ease-in-out infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            fadeOut: {
              '0%': { opacity: '1' },
              '100%': { opacity: '0' }
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            },
            slideDown: {
              '0%': { transform: 'translateY(-20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            },
            scaleIn: {
              '0%': { transform: 'scale(0.95)', opacity: '0' },
              '100%': { transform: 'scale(1)', opacity: '1' }
            },
            pulseSoft: {
              '0%, 100%': { opacity: '1' },
              '50%': { opacity: '0.7' }
            }
          }
        }
      }
    }
  </script>

<style>

.breadCrumbsWrapper {
  background-color: var(--overlay);
  border-bottom: 1px solid var(--border);
  padding: 12px 12px;
  transition: transform 0.3s ease-in-out;
  backdrop-filter: blur(8px);
  background-color: rgba(var(--overlay-rgb, 15 23 42), 0.8);
}

.breadCrumbsWrapper.hidden {
  transform: translateY(-100%);
}

.breadCrumbContainer {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
}

.breadCrumb {
  display: inline-flex;
  align-items: center;
  color: #94a3b8;
  font-size: 14px;
  font-weight: 500;
  line-height: 1.5;
  text-decoration: none;
  transition: color 0.2s ease;
  white-space: nowrap;
}

.breadCrumb:hover {
  color: #e2e8f0;
}

.breadCrumb.current {
  color: var(--text);
  font-weight: 500;
  pointer-events: none;
}

.navDivider {
  display: inline-flex;
  align-items: center;
  color: #475569;
  margin: 0;
}

.navDivider svg {
  width: 16px;
  height: 16px;
  fill: currentColor;
  flex-shrink: 0;
}





/* Add to your existing CSS */
.breadCrumbsWrapper {
  /* ...existing styles ...*/
  backdrop-filter: blur(8px) saturate(180%);
  -webkit-backdrop-filter: blur(8px) saturate(180%);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 
              0 2px 4px -1px rgba(0, 0, 0, 0.06);
  transition: transform 0.15s ease-out;
}

/* Ensure main navbar stays above */
.navbar {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}





/* to-do */
/* needs to be somewhere where base logic is */
.hide {
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.3s ease-in-out;
}



#fileName {
  position: absolute;
  right: 1rem;
}








</style>

<style id="overRide">
html {
  font-size: 13px !important;
}

* {
.no-scrollbar {
    &::-webkit-scrollbar {
        display: none;
    }

    -ms-overflow-style: none;
    scrollbar-width: none;
}

</style>


<style>
/**
THESE wrapper containers were created because i was under 
the impression that a sticky element has to have a container 
to stick to other than the body container.....
**/
.wrapper[data-wrap="top"],
.wrapper[data-wrap="bottom"] {
  width: 100%;
  margin: 0;
  padding: 0;
}
.wrapper[data-wrap="top"]{
  height: 65px;
}
.wrapper[data-wrap="bottom"]{
  height: calc(100vh - 65px);
}

/**
i want THIS to stick to the top of the page
and ALWAYS be visible

and for NOTHING to ever be pushed "behind" it
EXCEPT FOR ".breadCrumbsWrapper" whenever the header
pushes it up and out
**/
.navbar {
  position: sticky;
  top: 0;
  height: 40px;
  background: var(--canvasOverlay);
  border-bottom: 0.0625rem solid var(--borderDefault);
  padding: 0.75rem 1rem;
  z-index: 100; /* Highest z-index */
}


/**
i want THIS to stick to the bottom of ".navbar"
**/
.breadCrumbsWrapper {
  position: sticky;
  top: 40px; /* Height of navbar */
  z-index: 90; /* Lower than navbar but higher than normal content */
  
  height: 25px;
  
  background-color: var(--canvasOverlay);
  border-bottom: 1px solid var(--borderDefault);
  
  backdrop-filter: blur(8px) saturate(180%);
  -webkit-backdrop-filter: blur(8px) saturate(180%);
}


/**
i want THIS to PUSH AND REPLACE ".breadCrumbsWrapper"
**/
.coderHeaderWrapper {
  position: sticky;
  top: 40px; /* Same as breadcrumbs - this will push it */
  z-index: 95; /* Higher than breadcrumbs but lower than navbar */
  
  height: 35px;
  
  overflow: hidden;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;


  background-color: var(--canvasOverlay);
  border-bottom: 1px solid var(--borderDefault);
}

/**
i want THIS to stick to the bottom of ".coderHeaderWrapper"
**/
.coderToolBarWrapper {
  position: sticky;
  top: 75px; /* navbar(40) + coderHeader(35) */
  z-index: 80;
}

/* Content needs padding to not hide under sticky elements */
.pages {
  padding-top: 65px; /* navbar(40) + breadcrumbs(25) initially */
}

/* When breadcrumbs is pushed up, adjust padding */
.pages.breadcrumbs-pushed {
  padding-top: 40px; /* Only navbar remains */
}

/* Additional styling for proper layout */
.editorContainer {
  margin-top: -25px; /* Pull up to overlap with breadcrumbs */
}

.upper {
  position: relative;
}

/* Ensure content flows properly */
#mainArea {
  position: relative;
}
</style>

</head>
<body class="bg-github-canvas-default">





<!-------
     Progress Loading Bar
                      ------->
<div id="pageProgress" class="ph-progress page-progress">
    <div class="progress-bar">
      <div class="ph-fill progress-fill"></div>
    </div>
  </div>




<!-------
         Top NAVBar
                  ----------->
<nav class="navbar" aria-label="Main navigation">
  <div class="navbar-inner">
    
    <!-- Left Section -->
    <div class="navbar-section navbar-left">
      <button 
        id="leftSidebarTrigger" 
        class="navbar-button navbar-button-icon"
        aria-label="Toggle left sidebar menu"
        data-action="toggle-sidebar"
        data-target="left"
      >
        <i class="fas fa-bars"></i>
      </button>
      
      <a href="#" class="navbar-brand" aria-label="GitDev homepage">
        <i class="fab fa-github navbar-brand-icon"></i>
        <span class="navbar-brand-text">GitDev</span>
      </a>
    </div>

    <!-- Center Section (Search Button) -->
    <div class="navbar-section navbar-center">
      <button 
        onclick="showSearchModal()" 
        class="navbar-button navbar-button-search"
        aria-label="Search files"
        data-action="open-search"
        data-tooltip="Search files (Ctrl+K)"
      >
        <i class="fas fa-search navbar-button-icon"></i>
        <span class="navbar-button-label">Search</span>
        <kbd class="navbar-button-shortcut" aria-hidden="true">Ctrl+K</kbd>
      </button>
    </div>

    <!-- Right Section -->
    <div class="navbar-section navbar-right">


<!--      <button 
        class="navbar-button navbar-button-with-text"
        data-action="show-create-file"
        aria-label="Create new file"
      >
        <i class="fas fa-plus"></i>
        <span class="navbar-button-text">New</span>
      </button>
-->

<button class="navbar-button" data-action="new-file" id="newFileButton">
    New File
    <svg class="chevron" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
      <path d="M4.427 7.427l3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 10.896 2H4.604a.25.25 0 0 0-.177.427Z"/>
    </svg>
  </button>



      <button 
        class="navbar-button navbar-button-icon"
        data-action="toggle-theme"
        aria-label="Toggle dark/light theme"
        id="themeToggle"
      >
        <i id="themeIcon" class="fas fa-moon"></i>
      </button>
      
      <button 
        id="rightSidebarTrigger" 
        class="navbar-button navbar-button-icon"
        aria-label="Toggle right sidebar menu"
        data-action="toggle-sidebar"
        data-target="right"
      >
        <i class="fas fa-ellipsis-v"></i>
      </button>
    </div>
    
  </div>
</nav>

  <!-- B R E A D C R U M B S -->
  <div class="breadCrumbsWrapper" id="breadCrumbsWrapper">
    <div class="breadCrumbsContainer" id="breadCrumbsContainer">
      <nav class="breadcrumbNav" id="pathBreadcrumb">
        <div class="breadcrumbEmpty"></div>
      </nav>
    </div>
  </div>




<!--  P A G E  W R A P P E R 
===================================================
===================================================-->
<main id="mainArea">





<!-------
     Repository Selector View
                          ---->
<div
  data-page="repo"
  id="repoSelectorView"
  class="pages max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-6">


  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-github-fg-default">Your Repositories</h2>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="repoList">
  </div>
</div><!-- E N D -->



<!-------
     File Explorer View
                    ---------->
<div
  data-page="explorer"
  id="explorerView"
  class="pages max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-6">


  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center space-x-3">
      <div class="relative">
        <button id="branchSelector" class="inline-flex items-center px-3 py-1.5 border border-github-border-default rounded-md text-sm font-medium text-github-fg-default bg-github-btn-secondary-bg hover:bg-github-btn-secondary-hover transition-colors">
          <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 16 16">
            <path d="M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z" />
          </svg>
          <span id="currentBranch">main</span>
          <svg class="w-4 h-4 ml-1 text-github-fg-muted" fill="currentColor" viewBox="0 0 16 16">
            <path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z" />
          </svg>
        </button>
        <div id="branchDropdown" class="hidden absolute z-10 mt-1 w-56 bg-github-canvas-overlay border border-github-border-default rounded-md shadow-lg">
          <div class="p-1">
            <input type="text" placeholder="Find or create branch..." class="w-full px-2 py-1 mb-1 bg-github-canvas-inset border border-github-border-default rounded text-sm text-github-fg-default">
            <div class="max-h-60 overflow-y-auto">
              <div class="px-2 py-1 text-sm text-github-fg-default hover:bg-github-canvas-subtle cursor-pointer">main</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="flex items-center space-x-2">
      <button data-action="create-file" class="inline-flex items-center px-3 py-1.5 bg-github-btn-primary-bg hover:bg-github-btn-primary-hover text-white rounded-md text-sm font-medium transition-colors">
        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 16 16">
          <path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z" />
        </svg>
        New
      </button>
      <button class="inline-flex items-center px-3 py-1.5 border border-github-border-default rounded-md text-sm font-medium text-github-fg-default bg-github-btn-secondary-bg hover:bg-github-btn-secondary-hover transition-colors">
        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 16 16">
          <path d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z" />
          <path d="M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z" />
        </svg>
        Code
      </button>
    </div>
  </div>

  <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg overflow-hidden">
    <div class="px-4 py-3 border-b border-github-border-muted bg-github-canvas-overlay">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <img src="https://github.com/github.png" alt="User" class="w-6 h-6 rounded-full">
          <div class="flex items-center space-x-2">
            <span class="text-github-fg-default font-medium">
              <!-- FAR LEFT SIDE -->
            </span>
            <span class="text-github-fg-default">
              <!-- LEFT SIDE -->
              
              <button
                  onclick="showImportModal()"
                  class="flex items-center gap-2 px-4 py-2 bg-github-canvas-overlay hover:bg-github-canvas-subtle border border-github-border-default rounded-lg transition-all"
                  data-tooltip="Import from URL">
                <i class="fas fa-download"></i>
                <span class="hidden sm:inline">Import</span>
              </button>
              
            </span>
          </div>
        </div>
        <div class="flex items-center space-x-4 text-sm text-github-fg-muted">
          <span id="lastCommitTime">
            <!-- RIGHT SIDE -->
          </span>
          <span class="font-mono" id="commitHash">
            <!-- FAR RIGHT SIDE -->
            
            <button
                onclick="showUploadModal()"
                class="flex items-center gap-2 px-4 py-2 bg-github-success-emphasis hover:bg-github-success-fg text-white rounded-lg transition-all"
                data-tooltip="Upload files (Ctrl+U)">
              <i class="fas fa-upload"></i>
              <span class="hidden sm:inline">Upload</span>
            </button>

          </span>
        </div>
      </div>
    </div>

    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-github-tableHeader">
          <tr>
            <th class="px-4 py-2 text-left text-sm font-medium text-github-fg-default">Name</th>
            <th class="px-4 py-2 text-left text-sm font-medium text-github-fg-default">Last commit message</th>
            <th class="px-4 py-2 text-right text-sm font-medium text-github-fg-default">Updated</th>
          </tr>
        </thead>
        <tbody id="fileListBody" class="divide-y divide-github-border-muted">
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2">
      <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold text-github-fg-default">README.md</h2>
          <button class="text-github-fg-muted hover:text-github-fg-default">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z" />
            </svg>
          </button>
        </div>
        <div class="prose prose-invert max-w-none" id="readmeContent">
          <h1>GitDev</h1>
          <p>A professional file explorer and editor interface that mimics GitHub's design and functionality with local storage.</p>
        </div>
      </div>
    </div>

    <div class="space-y-6">
      <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg p-4">
        <h3 class="font-semibold text-github-fg-default mb-3">About</h3>
        <p class="text-sm text-github-fg-muted mb-4" id="repoDescription">GitDev with Local Storage</p>
        <div class="space-y-2 text-sm">
          <div class="flex items-center space-x-2">
            <svg class="w-4 h-4 text-github-fg-muted" fill="currentColor" viewBox="0 0 16 16">
              <path d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z" />
            </svg>
            <span class="text-github-fg-muted">Local file management system</span>
          </div>
        </div>
      </div>

      <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg p-4">
        <h3 class="font-semibold text-github-fg-default mb-3">Languages</h3>
        <div class="space-y-2" id="languageStats">
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 rounded-full bg-orange-500"></div>
              <span class="text-github-fg-default">HTML</span>
            </div>
            <span class="text-github-fg-muted">47.2%</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
              <span class="text-github-fg-default">JavaScript</span>
            </div>
            <span class="text-github-fg-muted">43.8%</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 rounded-full bg-blue-500"></div>
              <span class="text-github-fg-default">CSS</span>
            </div>
            <span class="text-github-fg-muted">7.0%</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 rounded-full bg-purple-500"></div>
              <span class="text-github-fg-default">Other</span>
            </div>
            <span class="text-github-fg-muted">2.0%</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div><!-- E N D -->




<!-------
     File Viewer & File Editor
                          ---->
<div
  data-page="file"
  class="pages">

</div><!-- E N D -->




</main>
<!--
===================================================
  E N D  E N D  E N D  E N D  E N D  E N D  E N D
===================================================-->






<!-- Modals -------------------------->
<div id="createFileModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
    <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg shadow-2xl w-full max-w-2xl animate-scale-in">
      <div class="px-6 py-4 border-b border-github-border-default">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold text-github-fg-default">Create new file</h3>
          <button data-action="hide-create-file-modal" class="text-github-fg-muted hover:text-github-fg-default transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16">
              <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z" />
            </svg>
          </button>
        </div>
      </div>

      <div class="p-6 space-y-6">
        <div>
          <label class="block text-sm font-medium text-github-fg-default mb-2">Name your file...</label>
          <div class="flex items-center bg-github-canvas-inset border border-github-border-default rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-github-accent-emphasis focus-within:border-transparent">
            <span class="px-3 py-2 bg-github-canvas-subtle border-r border-github-border-default text-github-fg-muted text-sm font-mono" id="currentPathPrefix">Repository/</span>
            <input type="text" id="newFileName" placeholder="filename.ext" class="flex-1 px-3 py-2 bg-transparent border-none text-github-fg-default placeholder-github-fg-muted focus:outline-none text-sm">
          </div>
          <p class="mt-1 text-xs text-github-fg-muted">The file extension will determine syntax highlighting</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-github-fg-default mb-2">Category (optional)</label>
          <input type="text" id="fileCategoryInput" maxlength="15" placeholder="e.g., Component, Utility, Config" class="w-full px-3 py-2 bg-github-canvas-inset border border-github-border-default rounded-md text-github-fg-default placeholder-github-fg-muted focus:outline-none focus:ring-2 focus:ring-github-accent-emphasis focus:border-transparent">
          <p class="mt-1 text-xs text-github-fg-muted">Maximum 15 characters</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-github-fg-default mb-2">Tags (optional)</label>
          <div class="space-y-2">
            <div id="selectedTags" class="flex flex-wrap gap-2 min-h-[2rem]">
            </div>
            <div class="flex items-center space-x-2">
              <input type="text" id="tagInput" placeholder="Add a tag..." class="flex-1 px-3 py-2 bg-github-canvas-inset border border-github-border-default rounded-md text-github-fg-default placeholder-github-fg-muted focus:outline-none focus:ring-2 focus:ring-github-accent-emphasis focus:border-transparent text-sm">
              <button data-action="add-tag" class="px-3 py-2 bg-github-accent-emphasis hover:bg-github-accent-fg text-white rounded-md text-sm font-medium transition-colors">
                Add
              </button>
            </div>
          </div>
          <p class="mt-1 text-xs text-github-fg-muted">Press Enter or click Add to add tags</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-github-fg-default mb-2">Initial content (optional)</label>
          <div id="initialContentEditor" class="border border-github-border-default rounded-sm h-20"></div>
        </div>
      </div>

      <div class="px-6 py-4 border-t border-github-border-default bg-github-canvas-subtle flex items-center justify-end space-x-3">
        <button data-action="hide-create-file-modal" class="px-4 py-2 border border-github-border-default rounded-md text-sm font-medium text-github-fg-default bg-github-btn-secondary-bg hover:bg-github-btn-secondary-hover transition-colors">
          Cancel
        </button>
        <button data-action="create-file" class="px-4 py-2 bg-github-btn-primary-bg hover:bg-github-btn-primary-hover text-white rounded-md text-sm font-medium transition-colors">
          Create file
        </button>
      </div>
    </div>
  </div>

<div id="deleteFileModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
    <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg shadow-2xl w-full max-w-md animate-scale-in">
      <div class="px-6 py-4 border-b border-github-border-default">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold text-github-fg-default">Delete file</h3>
          <button data-action="hide-delete-file-modal" class="text-github-fg-muted hover:text-github-fg-default transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16">
              <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z" />
            </svg>
          </button>
        </div>
      </div>

      <div class="p-6">
        <p class="text-github-fg-default mb-4">Are you sure you want to delete <span id="fileToDeleteName" class="font-semibold">filename.ext</span>? This action cannot be undone.</p>
        <div class="flex items-center justify-end space-x-3">
          <button data-action="hide-delete-file-modal" class="px-4 py-2 border border-github-border-default rounded-md text-sm font-medium text-github-fg-default bg-github-btn-secondary-bg hover:bg-github-btn-secondary-hover transition-colors">
            Cancel
          </button>
          <button data-action="confirm-delete-file" class="px-4 py-2 bg-github-danger-fg hover:bg-red-600 text-white rounded-md text-sm font-medium transition-colors">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
<!-- E N D -- E N D -->



<!-- PopOver Element ----------------->
<div id="commitDropdown" class="dropdown-menu hide" role="menu">
    <div class="dropdown-header">
      <svg class="header-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" width="32" height="32">
        <path fill="currentColor" d="M64 48l112 0 0 88c0 39.8 32.2 72 72 72l88 0 0 240c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16zM224 67.9l92.1 92.1-68.1 0c-13.3 0-24-10.7-24-24l0-68.1zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-261.5c0-17-6.7-33.3-18.7-45.3L242.7 18.7C230.7 6.7 214.5 0 197.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
      </svg>
      <div class="save-info">
        <h4 class="save-title" id="popoverTitle">Add Commit & Save</h4>
        <p class="save-subtitle" id="popoverSubtitle">Enter a commit message before saving</p>
      </div>
    </div>
    
    <div class="commit-form">
      <div class="commit-input-group">
        <label for="commitMessage" class="commit-label">Commit Message</label>
        <textarea 
          id="commitMessage" 
          class="commit-textarea" 
          placeholder="Describe what you changed..."
          rows="3"
        ></textarea>
      </div>
      
      <div class="form-actions">
        <button id="commitCancelBtn" class="btn btn-secondary">Cancel</button>
        <button id="commitSaveBtn" class="btn btn-primary">Save Changes</button>
      </div>
    </div>
  </div>
<!-- E N D -- E N D -->


<!-------
     Left & Right Sidebars
                      ------->
<div id="overlay" class="fixed inset-0 bg-black"></div>
  <aside id="leftSidebar" class="sidebar left-sidebar">
    <div class="p-4 h-full overflow-y-auto">
      <!-- User Profile -->
      <div class="profile-section">
        <img src="https://dev.wuaze.com/banner.png" alt="Profile" class="profile-avatar" />
        <div class="profile-info">
          <h3 class="profile-name">GitDev</h3>
          <span class="profile-username">GitHub File Manager</span>
        </div>
        <!-- Files are stored directly in your GitHub repository -->
      </div>

      <!-- Quick Actions -->
      <div class="mb-6">
        <span class="sidebar-title">Quick Actions</span>
        <div class="space-y-1">
          <button data-action="create-file" class="sidebar-link">
            <i class="fas fa-file mr-2"></i>
            New File
          </button>
          <button data-action="show-repo-selector" data-spa-navigate="repo" href="#repo"class="sidebar-link">
            <i class="fas fa-folder mr-2"></i>
            Browse Repositories
          </button>
          <button data-action="navigate-root" class="sidebar-link">
            <i class="fas fa-home mr-2"></i>
            Go to Root
          </button>
        </div>
      </div>

      <!-- Repository List -->
      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <span class="sidebar-title">Repositories</span>
          <span id="repoCount" class="text-xs text-github-fg-muted">0</span>
        </div>
        <div id="repoListSidebar" class="space-y-1">
          <!-- Repositories will be populated here -->
        </div>
      </div>

      <!-- Navigation Links -->
      <div>
        <span class="sidebar-title">Navigation</span>
        <div class="space-y-1">
          <a href="#" data-navigate="repo" class="sidebar-link">
            <i class="fas fa-code mr-2"></i>
            Code
          </a>
          <a href="#" class="sidebar-link">
            <i class="fas fa-exclamation-circle mr-2"></i>
            Issues
            <span class="ml-auto bg-github-canvas-subtle text-github-fg-default text-xs px-1.5 py-0.5 rounded-full">0</span>
          </a>
          <a href="#" class="sidebar-link">
            <i class="fas fa-code-branch mr-2"></i>
            Pull Requests
            <span class="ml-auto bg-github-canvas-subtle text-github-fg-default text-xs px-1.5 py-0.5 rounded-full">0</span>
          </a>
          <a href="#" class="sidebar-link">
            <i class="fas fa-chart-bar mr-2"></i>
            Insights
          </a>
        </div>
      </div>

      <!-- File Stats -->
      <div class="mt-6 pt-4 border-t border-github-border-muted">
        <div class="flex items-center justify-between text-sm">
          <span class="text-github-fg-muted">Files:</span>
          <span id="totalFilesCount" class="font-medium">0</span>
        </div>
        <div class="flex items-center justify-between text-sm mt-1">
          <span class="text-github-fg-muted">Storage:</span>
          <span id="totalStorage" class="font-medium">0 KB</span>
        </div>
      </div>
    </div>
  </aside>
  <aside id="rightSidebar" class="sidebar right-sidebar">
    <div class="p-4 h-full overflow-y-auto">
      <!-- Recent Files -->
      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <span class="sidebar-title">Recent Files</span>
          <button onclick="refreshRecentFiles()" class="text-xs text-github-accent-fg hover:underline">
            Refresh
          </button>
        </div>
        <div id="recentFilesList" class="space-y-2">
          <!-- Recent files will be populated here -->
        </div>
      </div>

      <!-- Current Repository Info -->
      <div id="currentRepoInfo" class="mb-6 hidden">
        <span class="sidebar-title">Current Repository</span>
        <div class="p-3 bg-github-canvas-subtle rounded-md mt-2">
          <h4 id="currentRepoNameSidebar" class="font-semibold text-github-fg-default mb-1"></h4>
          <p id="currentRepoDesc" class="text-xs text-github-fg-muted mb-2"></p>
          <div class="flex items-center justify-between text-xs">
            <span class="text-github-fg-muted">Branch:</span>
            <span id="currentRepoBranch" class="font-medium">main</span>
          </div>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="mb-6">
        <span class="sidebar-title">Quick Stats</span>
        <div class="grid grid-cols-2 gap-2 mt-2">
          <div class="p-3 bg-github-canvas-subtle rounded-md text-center">
            <div class="text-lg font-semibold text-github-accent-fg" id="statsFiles">0</div>
            <div class="text-xs text-github-fg-muted">Files</div>
          </div>
          <div class="p-3 bg-github-canvas-subtle rounded-md text-center">
            <div class="text-lg font-semibold text-github-success-fg" id="statsCommits">0</div>
            <div class="text-xs text-github-fg-muted">Commits</div>
          </div>
          <div class="p-3 bg-github-canvas-subtle rounded-md text-center">
            <div class="text-lg font-semibold text-github-warning-fg" id="statsBranches">1</div>
            <div class="text-xs text-github-fg-muted">Branches</div>
          </div>
          <div class="p-3 bg-github-canvas-subtle rounded-md text-center">
            <div class="text-lg font-semibold text-github-danger-fg" id="statsIssues">0</div>
            <div class="text-xs text-github-fg-muted">Issues</div>
          </div>
        </div>
      </div>

      <!-- Language Distribution -->
      <div id="languageStatsSidebar" class="hidden">
        <span class="sidebar-title">Languages</span>
        <div id="languageStatsList" class="space-y-2 mt-2">
          <!-- Language stats will be populated here -->
        </div>
      </div>

      <!-- Quick Actions Footer -->
      <div class="mt-auto pt-4 border-t border-github-border-muted">
        <div class="space-y-2">
          <button onclick="toggleTheme()" class="sidebar-link w-full text-left">
            <i id="sidebarThemeIcon" class="fas fa-moon mr-2"></i>
            Toggle Theme
          </button>
          <button onclick="showHelp()" class="sidebar-link w-full text-left">
            <i class="fas fa-question-circle mr-2"></i>
            Help & Documentation
          </button>
        </div>
      </div>
    </div>
  </aside>





<script type="module" src="modules/index.js">
/**
 *  Main script
 */
</script>


<script id="sidebars">
const SidebarManager = {
  state: {
    isLeftSidebarOpen: false,
    isRightSidebarOpen: false,
    isDarkTheme: true,
    currentRepository: null,
    recentFiles: [],
    repositories: []
  },

  init() {
    this.setupEventListeners();
    this.loadData();
    this.checkWindowSize();
    this.setupAutoRefresh();
    this.updateRecentFiles();
    this.updateRepositoryList();
    this.updateStats();
  },

  setupEventListeners() {
    const leftSidebarTrigger = document.getElementById('leftSidebarTrigger');
    const rightSidebarTrigger = document.getElementById('rightSidebarTrigger');
    const overlay = document.getElementById('overlay');

    if (leftSidebarTrigger) {
      leftSidebarTrigger.addEventListener('click', (e) => {
        e.stopPropagation();
        this.toggleLeftSidebar();
      });
    }

    if (rightSidebarTrigger) {
      rightSidebarTrigger.addEventListener('click', (e) => {
        e.stopPropagation();
        this.toggleRightSidebar();
      });
    }

    if (overlay) {
      overlay.addEventListener('click', () => {
        if (this.state.isLeftSidebarOpen) {
          this.closeLeftSidebar();
        }
        if (this.state.isRightSidebarOpen) {
          this.closeRightSidebar();
        }
      });
    }

    document.addEventListener('click', (e) => {
      if (window.innerWidth > 1200) return;
      
      const leftSidebar = document.getElementById('leftSidebar');
      const rightSidebar = document.getElementById('rightSidebar');
      const leftTrigger = document.getElementById('leftSidebarTrigger');
      const rightTrigger = document.getElementById('rightSidebarTrigger');
      
      const isClickOnLeftTrigger = e.target === leftTrigger || leftTrigger.contains(e.target);
      const isClickOnRightTrigger = e.target === rightTrigger || rightTrigger.contains(e.target);
      const isClickInLeftSidebar = leftSidebar.contains(e.target);
      const isClickInRightSidebar = rightSidebar.contains(e.target);
      
      if (this.state.isLeftSidebarOpen && !isClickInLeftSidebar && !isClickOnLeftTrigger) {
        this.closeLeftSidebar();
      }
      
      if (this.state.isRightSidebarOpen && !isClickInRightSidebar && !isClickOnRightTrigger) {
        this.closeRightSidebar();
      }
    });

    window.addEventListener('resize', () => {
      this.checkWindowSize();
    });
  },

  loadData() {
    try {
      this.state.recentFiles = JSON.parse(localStorage.getItem('gitcodr_recent_files') || '[]');
      this.state.repositories = JSON.parse(localStorage.getItem('gitcodr_repositories') || '[]');
    } catch (e) {
      this.state.recentFiles = [];
      this.state.repositories = [];
    }
  },

  toggleLeftSidebar() {
    if (window.innerWidth <= 1200) {
      if (this.state.isLeftSidebarOpen) {
        this.closeLeftSidebar();
      } else {
        this.openLeftSidebar();
      }
    }
  },

  toggleRightSidebar() {
    if (window.innerWidth <= 1200) {
      if (this.state.isRightSidebarOpen) {
        this.closeRightSidebar();
      } else {
        this.openRightSidebar();
      }
    }
  },

  openLeftSidebar() {
    const leftSidebar = document.getElementById('leftSidebar');
    const overlay = document.getElementById('overlay');
    
    this.closeRightSidebar();
    
    this.state.isLeftSidebarOpen = true;
    leftSidebar.classList.add('open');
    overlay.classList.add('active');
  },

  openRightSidebar() {
    const rightSidebar = document.getElementById('rightSidebar');
    const overlay = document.getElementById('overlay');
    
    this.closeLeftSidebar();
    
    this.state.isRightSidebarOpen = true;
    rightSidebar.classList.add('open');
    overlay.classList.add('active');
  },

  closeLeftSidebar() {
    const leftSidebar = document.getElementById('leftSidebar');
    const overlay = document.getElementById('overlay');
    
    this.state.isLeftSidebarOpen = false;
    leftSidebar.classList.remove('open');
    
    if (!this.state.isRightSidebarOpen) {
      overlay.classList.remove('active');
    }
  },

  closeRightSidebar() {
    const rightSidebar = document.getElementById('rightSidebar');
    const overlay = document.getElementById('overlay');
    
    this.state.isRightSidebarOpen = false;
    rightSidebar.classList.remove('open');
    
    if (!this.state.isLeftSidebarOpen) {
      overlay.classList.remove('active');
    }
  },

  checkWindowSize() {
    const leftSidebar = document.getElementById('leftSidebar');
    const rightSidebar = document.getElementById('rightSidebar');
    const overlay = document.getElementById('overlay');
    const mainContentWrapper = document.getElementById('mainArea');
    
    if (window.innerWidth <= 1200) {
      leftSidebar.classList.remove('open');
      rightSidebar.classList.remove('open');
      this.state.isLeftSidebarOpen = false;
      this.state.isRightSidebarOpen = false;
      overlay.classList.remove('active');
      
      if (mainContentWrapper) {
        mainContentWrapper.style.marginLeft = '0';
        mainContentWrapper.style.marginRight = '0';
      }
    } else {
      leftSidebar.classList.remove('open');
      rightSidebar.classList.remove('open');
      this.state.isLeftSidebarOpen = false;
      this.state.isRightSidebarOpen = false;
      overlay.classList.remove('active');
      
      if (mainContentWrapper) {
        mainContentWrapper.style.marginLeft = 'var(--sidebar-width)';
        mainContentWrapper.style.marginRight = 'var(--sidebar-width)';
      }
    }
  },

  toggleTheme() {
    const html = document.documentElement;
    const themeIcons = document.querySelectorAll('#themeIcon, #sidebarThemeIcon');
    
    this.state.isDarkTheme = !this.state.isDarkTheme;
    
    if (this.state.isDarkTheme) {
      html.setAttribute('data-theme', 'dark');
      themeIcons.forEach(icon => {
        icon.className = 'fas fa-moon';
      });
    } else {
      html.setAttribute('data-theme', 'light');
      themeIcons.forEach(icon => {
        icon.className = 'fas fa-sun';
      });
    }
    
    localStorage.setItem('gitcodr_theme', this.state.isDarkTheme ? 'dark' : 'light');
  },

  updateRecentFiles() {
    const recentFilesList = document.getElementById('recentFilesList');
    if (!recentFilesList) return;
    
    this.loadData();
    
    if (this.state.recentFiles.length === 0) {
      recentFilesList.innerHTML = '<div class="text-center py-4 text-github-fg-muted text-sm"><i class="fas fa-file text-lg mb-2 block"></i>No recent files</div>';
    } else {
      recentFilesList.innerHTML = this.state.recentFiles.slice(0, 5).map(file => `<div class="recent-file-item" onclick="SidebarManager.openRecentFile('${file.repoName}', '${file.filePath}', '${file.fileName}')"><i class="fas fa-file recent-file-icon"></i><div class="flex-1 min-w-0"><div class="text-sm text-github-fg-default truncate">${file.fileName}</div><div class="text-xs text-github-fg-muted truncate">${file.repoName}</div></div><div class="text-xs text-github-fg-muted">${this.formatTimeAgo(file.timestamp)}</div></div>`).join('');
    }
  },

  updateRepositoryList() {
    const repoListSidebar = document.getElementById('repoListSidebar');
    const repoCount = document.getElementById('repoCount');
    
    if (!repoListSidebar) return;
    
    this.loadData();
    
    if (this.state.repositories.length === 0) {
      repoListSidebar.innerHTML = '<div class="text-center py-2 text-sm text-github-fg-muted">No repositories yet</div>';
    } else {
      repoListSidebar.innerHTML = this.state.repositories.map(repo => `<div class="repo-item ${this.state.currentRepository === repo.name ? 'active' : ''}" onclick="SidebarManager.selectRepository('${repo.name}')"><i class="fas fa-folder repo-icon ${repo.visibility === 'public' ? 'public' : ''}"></i><span class="flex-1 truncate">${repo.name}</span><span class="text-xs text-github-fg-muted">${this.formatDate(repo.created)}</span></div>`).join('');
    }
    
    if (repoCount) {
      repoCount.textContent = this.state.repositories.length.toString();
    }
  },

  updateStats() {
    const totalFilesCount = document.getElementById('totalFilesCount');
    const totalStorage = document.getElementById('totalStorage');
    const currentRepoNameSidebar = document.getElementById('currentRepoNameSidebar');
    const currentRepoDesc = document.getElementById('currentRepoDesc');
    const currentRepoInfo = document.getElementById('currentRepoInfo');
    const statsFiles = document.getElementById('statsFiles');
    const statsCommits = document.getElementById('statsCommits');
    const statsBranches = document.getElementById('statsBranches');
    const statsIssues = document.getElementById('statsIssues');
    
    let totalFiles = 0;
    let totalSize = 0;
    
    this.state.repositories.forEach(repo => {
      try {
        const repoData = JSON.parse(localStorage.getItem(`gitcodr_repo_${repo.name}`) || '{}');
        const fileCount = Object.keys(repoData).length;
        totalFiles += fileCount;
        
        Object.values(repoData).forEach(file => {
          totalSize += file.size || 0;
        });
      } catch (e) {
        console.warn(`Error processing repo ${repo.name}:`, e);
      }
    });
    
    if (totalFilesCount) totalFilesCount.textContent = totalFiles.toString();
    if (totalStorage) totalStorage.textContent = this.formatFileSize(totalSize);
    if (statsFiles) statsFiles.textContent = totalFiles.toString();
    if (statsCommits) statsCommits.textContent = Math.floor(totalFiles * 1.5).toString();
    if (statsBranches) statsBranches.textContent = this.state.repositories.length.toString();
    if (statsIssues) statsIssues.textContent = '0';
    
    if (this.state.currentRepository) {
      const repo = this.state.repositories.find(r => r.name === this.state.currentRepository);
      if (repo) {
        if (currentRepoNameSidebar) currentRepoNameSidebar.textContent = repo.name;
        if (currentRepoDesc) currentRepoDesc.textContent = repo.description || 'No description';
        if (currentRepoInfo) currentRepoInfo.classList.remove('hidden');
      }
    } else {
      if (currentRepoInfo) currentRepoInfo.classList.add('hidden');
    }
  },

  selectRepository(repoName) {
    this.state.currentRepository = repoName;
    this.updateRepositoryList();
    this.updateStats();
    
    if (typeof openRepository === 'function') {
      openRepository(repoName);
    }
    
    if (window.innerWidth <= 1200) {
      this.closeLeftSidebar();
    }
  },

  openRecentFile(repoName, filePath, fileName) {
    this.state.currentRepository = repoName;
    this.updateRepositoryList();
    this.updateStats();
    
    if (typeof openRecentFile === 'function') {
      openRecentFile(repoName, filePath, fileName);
    }
    
    if (window.innerWidth <= 1200) {
      this.closeRightSidebar();
    }
  },

  refreshRecentFiles() {
    this.loadData();
    this.updateRecentFiles();
  },

  addToRecentFiles(fileName, repoName, filePath) {
    const existingIndex = this.state.recentFiles.findIndex(f => f.filePath === filePath && f.repoName === repoName);
    
    if (existingIndex !== -1) {
      this.state.recentFiles.splice(existingIndex, 1);
    }
    
    this.state.recentFiles.unshift({
      fileName,
      repoName,
      filePath,
      timestamp: Date.now()
    });
    
    if (this.state.recentFiles.length > 10) {
      this.state.recentFiles = this.state.recentFiles.slice(0, 10);
    }
    
    localStorage.setItem('gitcodr_recent_files', JSON.stringify(this.state.recentFiles));
    this.updateRecentFiles();
  },

  setupAutoRefresh() {
    setInterval(() => {
      this.loadData();
      this.updateRecentFiles();
      this.updateRepositoryList();
      this.updateStats();
    }, 30000);
  },

  formatDate(timestamp) {
    if (!timestamp) return '';
    const date = new Date(timestamp);
    return date.toLocaleDateString();
  },

  formatTimeAgo(timestamp) {
    if (!timestamp) return '';
    const now = new Date();
    const date = new Date(timestamp);
    const diff = now - date;
    
    if (diff < 60000) return 'now';
    if (diff < 3600000) return Math.floor(diff / 60000) + 'm';
    if (diff < 86400000) return Math.floor(diff / 3600000) + 'h';
    if (diff < 604800000) return Math.floor(diff / 86400000) + 'd';
    return Math.floor(diff / 604800000) + 'w';
  },

  formatFileSize(bytes) {
    if (typeof bytes !== 'number') return '0 KB';
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    if (bytes === 0) return '0 Bytes';
    const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
    return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];
  },

  updateAll() {
    this.loadData();
    this.updateRecentFiles();
    this.updateRepositoryList();
    this.updateStats();
  },

  setCurrentRepository(repoName) {
    this.state.currentRepository = repoName;
    this.updateRepositoryList();
    this.updateStats();
  }
};

document.addEventListener('DOMContentLoaded', () => {
  SidebarManager.init();
  
  const savedTheme = localStorage.getItem('gitcodr_theme');
  if (savedTheme === 'light') {
    SidebarManager.state.isDarkTheme = false;
    SidebarManager.toggleTheme();
  }
});

function updateSidebarAfterFileOperation(repoName, fileName, filePath) {
  if (SidebarManager) {
    SidebarManager.addToRecentFiles(fileName, repoName, filePath);
    SidebarManager.updateStats();
  }
}

function updateSidebarAfterRepoOperation() {
  if (SidebarManager) {
    SidebarManager.updateRepositoryList();
    SidebarManager.updateStats();
  }
}
</script>


<script id="serviceWorker">
class ServiceWorkerManager {
    constructor() {
        this.registration = null;
        this.init();
    }
    
    async init() {
        if ('serviceWorker' in navigator) {
            await this.register();
            this.setupListeners();
        }
    }
    
    async register() {
        try {
            this.registration = await navigator.serviceWorker.register('https://clockblocked.github.io/bytes/webApp/serviceWorker.js', {
                scope: '/',
                updateViaCache: 'all'
            });
            
            console.log(' Service Worker registered:', this.registration);
            
            if (this.registration.waiting) {
                this.showUpdateReady();
            }
            
            return this.registration;
        } catch (error) {
            console.error(' Service Worker registration failed:', error);
            return null;
        }
    }
    
    setupListeners() {
        this.registration.addEventListener('updatefound', () => {
            const newWorker = this.registration.installing;
            console.log(' Update found, installing new Service Worker');
            
            newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed') {
                    if (navigator.serviceWorker.controller) {
                        this.showUpdateReady();
                    } else {
                        console.log(' Content is cached for offline use.');
                    }
                }
            });
        });
        
        navigator.serviceWorker.addEventListener('controllerchange', () => {
            console.log(' New Service Worker controlling the page');
        });
        
        navigator.serviceWorker.addEventListener('message', event => {
            this.handleMessage(event.data);
        });
    }
    
    showUpdateReady() {
        const updateDialog = document.createElement('div');
        updateDialog.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: #238636;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 1rem;
            max-width: 400px;
        `;
        
        updateDialog.innerHTML = `
            <span> New version available</span>
            <button style="
                background: white;
                color: #238636;
                border: none;
                padding: 0.5rem 1rem;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
            ">Update</button>
            <button style="
                background: transparent;
                color: white;
                border: 1px solid white;
                padding: 0.5rem;
                border-radius: 4px;
                cursor: pointer;
            "></button>
        `;
        
        document.body.appendChild(updateDialog);
        
        const updateBtn = updateDialog.querySelector('button');
        const closeBtn = updateDialog.querySelector('button:last-child');
        
        updateBtn.addEventListener('click', () => {
            if (this.registration.waiting) {
                this.registration.waiting.postMessage({ type: 'SKIP_WAITING' });
            }
            window.location.reload();
        });
        
        closeBtn.addEventListener('click', () => {
            updateDialog.remove();
        });
    }
    
    handleMessage(data) {
        console.log(' Message from Service Worker:', data);
        
        switch (data.type) {
            case 'CACHE_UPDATED':
                console.log('Cache updated:', data.payload);
                break;
            case 'OFFLINE':
                this.showOfflineWarning();
                break;
        }
    }
    
    showOfflineWarning() {
        const indicator = document.createElement('div');
        indicator.id = 'offline-indicator';
        indicator.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #f0ad4e;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            z-index: 9998;
        `;
        indicator.textContent = ' Offline';
        document.body.appendChild(indicator);
        
        setTimeout(() => indicator.remove(), 3000);
    }
    
    async checkForUpdates() {
        if (this.registration) {
            await this.registration.update();
        }
    }
    
    async unregister() {
        if (this.registration) {
            const unregistered = await this.registration.unregister();
            console.log('Service Worker unregistered:', unregistered);
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    swManager = new ServiceWorkerManager();
    
    const installBtn = document.createElement('button');
    installBtn.id = 'pwa-install-btn';
    installBtn.innerHTML = ' Install App';
    installBtn.style.cssText = `
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: #58a6ff;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        cursor: pointer;
        z-index: 9997;
        display: none;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    `;
    document.body.appendChild(installBtn);
});

let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    
    const installBtn = document.getElementById('pwa-install-btn');
    if (installBtn) {
        installBtn.style.display = 'block';
        
        installBtn.addEventListener('click', async () => {
            installBtn.style.display = 'none';
            
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`User response to install prompt: ${outcome}`);
                deferredPrompt = null;
            }
        });
    }
});

window.addEventListener('appinstalled', () => {
    console.log('PWA installed successfully');
    const installBtn = document.getElementById('pwa-install-btn');
    if (installBtn) installBtn.style.display = 'none';
});
</script>  


<script id="share">
    if (window.location.search.includes('share')) {
        window.addEventListener('load', async () => {
            const formData = await getSharedData();
            if (formData) {
                handleSharedFiles(formData);
            }
        });
    }

    async function getSharedData() {
        // process files shared via Web Share Target API
    }

    function handleSharedFiles(formData) {
        // Process and upload shared files
        console.log('Processing shared files...');
    }
</script>


<script id="debugger" src="https://cdn.jsdelivr.net/npm/eruda">
/**
 *  E R U D A
 */
</script>
<script>
eruda.init();
</script>






</body>
</html>
