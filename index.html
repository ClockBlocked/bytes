<!DOCTYPE html>
<html lang="en" data-theme="dark">



<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>File Explorer - GitDev</title>

  <link rel="manifest" href="https://clockblocked.github.io/bytes/webApp/manifest.json">

  <!-- Global CSS -->
  <link rel="stylesheet" href="https://clockblocked.github.io/bytes/styleSheets/global/styles.css" />
  <link rel="stylesheet" href="https://clockblocked.github.io/bytes/styleSheets/codeMirror/styles.css" />

  <!-- jQuery 3.7.1 (Latest) -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" 
          integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" 
          crossorigin="anonymous"></script>


  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>


<!-- CodeMirror -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">


<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/foldgutter.min.css">
      
      
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    
    
<link rel="stylesheet"
      href="https://clockblocked.github.io/bytes/styleSheets/codeMirror/themes/chatgpt.css">      


  <!-- CodeMirror modes -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/markdown/markdown.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/php/php.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/sql/sql.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/yaml/yaml.min.js"></script>

  <!-- CodeMirror addons -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/search/searchcursor.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/selection/active-line.min.js"></script>

  <!-- Code folding -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/foldcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/foldgutter.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/brace-fold.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/comment-fold.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/indent-fold.min.js"></script>

  <!-- Prism (only if you actually use it for static highlighting) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

  <!-- Additional Libraries -->
  <script src="https://unpkg.com/@floating-ui/dom@1.5.4/dist/floating-ui.dom.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  
  
  
  
  
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            github: {
              'canvas-default': '#22272e',
              'tableHeader': '#2d333b',
              'canvas-overlay': '#2d333b',
              'canvas-inset': '#1c2128',
              'canvas-subtle': '#2d333b',
              'border-default': '#444c56',
              'border-muted': '#373e47',
              'neutral-emphasis': '#768390',
              'neutral-muted': '#636e7b',
              'fg-default': '#adbac7',
              'fg-muted': '#768390',
              'fg-subtle': '#545d68',
              'accent-fg': '#539bf5',
              'accent-emphasis': '#4184e4',
              'success-fg': '#57ab5a',
              'danger-fg': '#e5534b',
              'warning-fg': '#c69026',
              'btn-primary-bg': '#347d39',
              'btn-primary-hover': '#46954a',
              'btn-secondary-bg': '#373e47',
              'btn-secondary-hover': '#444c56'
            }
          },
          animation: {
            'fade-in': 'fadeIn 0.2s ease-out',
            'fade-out': 'fadeOut 0.2s ease-in',
            'slide-up': 'slideUp 0.3s ease-out',
            'slide-down': 'slideDown 0.3s ease-out',
            'scale-in': 'scaleIn 0.2s ease-out',
            'spin-slow': 'spin 1.5s linear infinite',
            'pulse-soft': 'pulseSoft 2s ease-in-out infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            fadeOut: {
              '0%': { opacity: '1' },
              '100%': { opacity: '0' }
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            },
            slideDown: {
              '0%': { transform: 'translateY(-20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            },
            scaleIn: {
              '0%': { transform: 'scale(0.95)', opacity: '0' },
              '100%': { transform: 'scale(1)', opacity: '1' }
            },
            pulseSoft: {
              '0%, 100%': { opacity: '1' },
              '50%': { opacity: '0.7' }
            }
          }
        }
      }
    }
  </script>

<style>

.breadCrumbsWrapper {
  background-color: var(--overlay);
  border-bottom: 1px solid var(--border);
  padding: 12px 12px;
  transition: transform 0.3s ease-in-out;
  backdrop-filter: blur(8px);
  background-color: rgba(var(--overlay-rgb, 15 23 42), 0.8);
}

.breadCrumbsWrapper.hidden {
  transform: translateY(-100%);
}

.breadCrumbContainer {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
}

.breadCrumb {
  display: inline-flex;
  align-items: center;
  color: #94a3b8;
  font-size: 14px;
  font-weight: 500;
  line-height: 1.5;
  text-decoration: none;
  transition: color 0.2s ease;
  white-space: nowrap;
}

.breadCrumb:hover {
  color: #e2e8f0;
}

.breadCrumb.current {
  color: var(--text);
  font-weight: 500;
  pointer-events: none;
}

.navDivider {
  display: inline-flex;
  align-items: center;
  color: #475569;
  margin: 0;
}

.navDivider svg {
  width: 16px;
  height: 16px;
  fill: currentColor;
  flex-shrink: 0;
}





/* Add to your existing CSS */
.breadCrumbsWrapper {
  /* ...existing styles ...*/
  backdrop-filter: blur(8px) saturate(180%);
  -webkit-backdrop-filter: blur(8px) saturate(180%);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 
              0 2px 4px -1px rgba(0, 0, 0, 0.06);
  transition: transform 0.15s ease-out;
}

/* Ensure main navbar stays above */
.navbar {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}





/* to-do */
/* needs to be somewhere where base logic is */
.hide {
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.3s ease-in-out;
}



#fileName {
  position: absolute;
  right: 1rem;
}








</style>

<style id="overRide">
html {
  font-size: 13px !important;
}

* {
.no-scrollbar {
    &::-webkit-scrollbar {
        display: none;
    }

    -ms-overflow-style: none;
    scrollbar-width: none;
}

</style>



</head>
<body>

<style>
/* ================================================
   MEGA MENU ‚Äî TOP NAV WITH SLIDE-DOWN PANELS
   Mobile-first ¬∑ Uses existing CSS variables
   ================================================ */

/* -----------------------------------------------
   CSS CUSTOM PROPERTIES (scoped to mega-menu)
   ----------------------------------------------- */
:root {
  --menu-height: 3.35rem;
  --menu-height-active: 3.75rem;
  --menu-z: 9000;
  --menu-bg: var(--card, #303030);
  --menu-border: var(--cardBorder, #444444);
  --menu-item-color: #9ca3af;
  --menu-item-hover: var(--color-primary, #539bf5);
  --menu-item-active: #e5e7eb;
  --menu-arrow-size: 2.85rem;
  --menu-panel-max: 20rem;
  --menu-panel-bg: var(--color-bg-secondary, #2d333b);
  --menu-panel-border: var(--color-border, #444c56);
  --menu-transition-speed: 350ms;
  --menu-transition-ease: cubic-bezier(0.4, 0, 0.2, 1);
}

/* -----------------------------------------------
   OVERLAY (blur behind open panel)
   ----------------------------------------------- */
.mega-overlay {
  position: fixed;
  inset: 0;
  z-index: calc(var(--menu-z) - 1);
  background: rgba(0, 0, 0, 0.25);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition:
    opacity var(--menu-transition-speed) var(--menu-transition-ease),
    visibility 0s linear var(--menu-transition-speed);
}

.mega-overlay.active {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transition:
    opacity var(--menu-transition-speed) var(--menu-transition-ease),
    visibility 0s linear 0s;
}

/* -----------------------------------------------
   TOP NAVBAR SHELL
   ----------------------------------------------- */
.mega-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: var(--menu-height);
  background: var(--menu-bg);
  border-bottom: 1px solid var(--menu-border);
  z-index: var(--menu-z);
  display: flex;
  align-items: center;
  user-select: none;
  -webkit-user-select: none;
}

/* -----------------------------------------------
   SCROLL ARROWS
   ----------------------------------------------- */
.mega-arrow {
  flex-shrink: 0;
  width: var(--menu-arrow-size);
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--menu-item-color);
  cursor: pointer;
  padding: 0;
  transition: color 200ms ease, opacity 200ms ease;
  position: relative;
  z-index: 2;
}

.mega-arrow:hover:not(.disabled) {
  color: var(--menu-item-hover);
}

.mega-arrow.disabled {
  color: var(--color-text-muted, #636e7b);
  opacity: 0.3;
  cursor: default;
  pointer-events: none;
}

.mega-arrow svg {
  width: 16px;
  height: 16px;
  fill: currentColor;
  flex-shrink: 0;
}

/* Left arrow fade gradient */
.mega-arrow-left {
  background: linear-gradient(to right, var(--menu-bg) 60%, transparent);
}

.mega-arrow-right {
  background: linear-gradient(to left, var(--menu-bg) 60%, transparent);
}

/* -----------------------------------------------
   SCROLLABLE TRACK (holds menu items)
   ----------------------------------------------- */
.mega-track {
  flex: 1;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-behavior: smooth;
  display: flex;
  align-items: center;
  height: 100%;
  min-width: 0;

  /* Hide scrollbar everywhere */
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.mega-track::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
}

.mega-items {
  display: flex;
  align-items: center;
  gap: 0;
  height: 100%;
  min-width: max-content;
  padding: 0 4px;
}

/* -----------------------------------------------
   MENU ITEMS
   ----------------------------------------------- */
.mega-item {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: 0 20px;
  background: transparent;
  border: none;
  cursor: pointer;
  white-space: nowrap;
  transition: color 200ms ease, background-color 200ms ease;

  /* Bold h3-style text */
  font-family: var(--font-head, "WF Visual Sans", sans-serif);
  font-size: 14px;
  font-weight: var(--weight-bold, 700);
  letter-spacing: 0.01em;
  line-height: 1;

  /* Default: light grey */
  color: var(--menu-item-color);
}

.mega-item:hover {
  color: var(--menu-item-hover);
  background: rgba(83, 155, 245, 0.06);
}

.mega-item:active {
  background: rgba(83, 155, 245, 0.1);
}

/* Active state: very light gray */
.mega-item.active {
  color: var(--menu-item-active);
  background: rgba(255, 255, 255, 0.04);
}

/* Active indicator underline */
.mega-item.active::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 12px;
  right: 12px;
  height: 2px;
  background: var(--menu-item-hover);
  border-radius: 2px 2px 0 0;
  animation: megaUnderline 200ms var(--menu-transition-ease) both;
}

@keyframes megaUnderline {
  from {
    transform: scaleX(0);
  }
  to {
    transform: scaleX(1);
  }
}

/* Optional badge on menu items */
.mega-item .mega-badge {
  margin-left: 8px;
  padding: 1px 6px;
  font-size: 10px;
  font-weight: 600;
  line-height: 1.5;
  border-radius: 10px;
  background: var(--color-primary, #539bf5);
  color: #fff;
}

/* -----------------------------------------------
   DROPDOWN PANELS
   ----------------------------------------------- */
.mega-panel {
  position: fixed;
  top: var(--menu-height);
  left: 0;
  right: 0;
  height: 0;
  overflow: hidden;
  background: var(--menu-panel-bg);
  border-bottom: 1px solid transparent;
  z-index: calc(var(--menu-z) - 1);
  will-change: height, opacity;
  transition:
    height 350ms cubic-bezier(0.4, 0, 0.2, 1), /* fallback */
    height 350ms linear(0, 0.264 3.7%, 0.49 7.4%, 0.692 11.3%, 0.864 15.3%, 0.937 17.3%, 1.005 19.4%, 1.065 21.5%, 1.12 23.7%, 1.167 25.9%, 1.206 28.1%, 1.24 30.4%, 1.267 32.8%, 1.283 34.6%, 1.296 36.4%, 1.305 38.3%, 1.311 40.2%, 1.314 42.2%, 1.313 44.2%, 1.309 46.4%, 1.301 48.6%, 1.282 52.5%, 1.252 56.9%, 1.217 61.3%, 1.105 74.4%, 1.074 78.6%, 1.048 82.5%, 1.026 86.9%, 1.011 91.1%, 1.002 95.4%, 1),
    opacity 350ms cubic-bezier(0.4, 0, 0.2, 1),
    border-color 0s linear 350ms;
  opacity: 0;
}

.mega-panel.open {
  height: var(--menu-panel-max);
  opacity: 1;
  border-bottom-color: var(--menu-panel-border);
  transition:
    height 350ms cubic-bezier(0.4, 0, 0.2, 1),
    height 350ms linear(0, 0.264 3.7%, 0.49 7.4%, 0.692 11.3%, 0.864 15.3%, 0.937 17.3%, 1.005 19.4%, 1.065 21.5%, 1.12 23.7%, 1.167 25.9%, 1.206 28.1%, 1.24 30.4%, 1.267 32.8%, 1.283 34.6%, 1.296 36.4%, 1.305 38.3%, 1.311 40.2%, 1.314 42.2%, 1.313 44.2%, 1.309 46.4%, 1.301 48.6%, 1.282 52.5%, 1.252 56.9%, 1.217 61.3%, 1.105 74.4%, 1.074 78.6%, 1.048 82.5%, 1.026 86.9%, 1.011 91.1%, 1.002 95.4%, 1),
    opacity 350ms cubic-bezier(0.4, 0, 0.2, 1),
    border-color 0s linear 0s;
}

/* Fixed: use body class instead of :has() */
body.mega-menu-open .mega-nav {
  height: 45px;
  transition: height 350ms ease;
}

.mega-panel-inner {
  padding: 20px 24px;
  opacity: 0;
  transform: translateY(-8px);
  transition:
    opacity 250ms ease 50ms,
    transform 250ms var(--menu-transition-ease) 50ms;
}

.mega-panel.open .mega-panel-inner {
  opacity: 1;
  transform: translateY(0);
}

/* -----------------------------------------------
   PANEL LAYOUTS ‚Äî shared helpers
   ----------------------------------------------- */
.panel-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

.panel-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.panel-section-title {
  font-family: var(--font-head, sans-serif);
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--color-text-muted, #636e7b);
  margin-bottom: 10px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--menu-panel-border);
}

/* -----------------------------------------------
   PANEL CARD (reusable clickable block)
   ----------------------------------------------- */
.panel-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid transparent;
  border-radius: var(--radius-md, 0.5rem);
  cursor: pointer;
  transition: all 200ms ease;
  text-align: left;
  width: 100%;
  color: var(--color-text, #adbac7);
  font-size: 13px;
}

.panel-card:hover {
  background: rgba(83, 155, 245, 0.06);
  border-color: var(--menu-panel-border);
  transform: translateX(2px);
}

.panel-card:active {
  transform: translateX(0);
  background: rgba(83, 155, 245, 0.1);
}

.panel-card-icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-md, 0.5rem);
  flex-shrink: 0;
  font-size: 16px;
}

.panel-card-icon.blue {
  background: rgba(83, 155, 245, 0.12);
  color: var(--color-primary, #539bf5);
}

.panel-card-icon.green {
  background: rgba(87, 171, 90, 0.12);
  color: var(--color-success, #57ab5a);
}

.panel-card-icon.orange {
  background: rgba(198, 144, 38, 0.12);
  color: var(--color-warning, #c69026);
}

.panel-card-icon.red {
  background: rgba(229, 83, 75, 0.12);
  color: var(--color-danger, #e5534b);
}

.panel-card-icon.purple {
  background: rgba(130, 80, 223, 0.12);
  color: #8250df;
}

.panel-card-body {
  flex: 1;
  min-width: 0;
}

.panel-card-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text, #adbac7);
  margin: 0 0 2px 0;
  line-height: 1.3;
}

.panel-card-desc {
  font-size: 11px;
  color: var(--color-text-muted, #636e7b);
  margin: 0;
  line-height: 1.3;
}

.panel-card-chevron {
  color: var(--color-text-muted, #636e7b);
  font-size: 12px;
  opacity: 0;
  transition: opacity 200ms ease;
}

.panel-card:hover .panel-card-chevron {
  opacity: 1;
}

/* -----------------------------------------------
   PANEL ‚Äî STATS ROW
   ----------------------------------------------- */
.stats-row {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

.stat-block {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.04);
  border-radius: var(--radius-md, 0.5rem);
  transition: background 200ms ease;
}

.stat-block:hover {
  background: rgba(255, 255, 255, 0.04);
}

.stat-block-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  font-size: 14px;
  flex-shrink: 0;
}

.stat-block-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text, #adbac7);
  line-height: 1;
  margin: 0 0 2px 0;
  font-family: var(--font-head, sans-serif);
}

.stat-block-label {
  font-size: 10px;
  color: var(--color-text-muted, #636e7b);
  text-transform: uppercase;
  letter-spacing: 0.04em;
  margin: 0;
}

/* -----------------------------------------------
   PANEL ‚Äî TOOL LIST (settings, help, etc.)
   ----------------------------------------------- */
.tool-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  background: transparent;
  border: none;
  border-radius: var(--radius-md, 0.5rem);
  cursor: pointer;
  width: 100%;
  text-align: left;
  color: var(--color-text, #adbac7);
  font-size: 13px;
  transition: all 150ms ease;
}

.tool-row:hover {
  background: rgba(255, 255, 255, 0.04);
}

.tool-row-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  background: rgba(83, 155, 245, 0.08);
  color: var(--color-primary, #539bf5);
  font-size: 13px;
  flex-shrink: 0;
}

.tool-row-text {
  flex: 1;
  font-weight: 500;
}

.tool-row-hint {
  font-size: 11px;
  color: var(--color-text-muted, #636e7b);
  font-family: var(--font-mono, monospace);
}

.tool-row-chevron {
  font-size: 11px;
  color: var(--color-text-muted, #636e7b);
  opacity: 0;
  transition: opacity 150ms ease;
}

.tool-row:hover .tool-row-chevron {
  opacity: 1;
}

/* -----------------------------------------------
   PANEL ‚Äî PROFILE
   ----------------------------------------------- */
.profile-banner {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: linear-gradient(135deg, rgba(83, 155, 245, 0.08), rgba(83, 155, 245, 0.02));
  border: 1px solid rgba(83, 155, 245, 0.15);
  border-radius: var(--radius-lg, 0.75rem);
}

.profile-banner-avatar {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  border: 2px solid var(--color-primary, #539bf5);
  flex-shrink: 0;
  object-fit: cover;
}

.profile-banner-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text, #adbac7);
  margin: 0 0 2px 0;
}

.profile-banner-role {
  font-size: 12px;
  color: var(--color-text-secondary, #768390);
  margin: 0;
}

/* -----------------------------------------------
   BODY OFFSET (push content below fixed navbar)
   ----------------------------------------------- */
body {
  padding-top: var(--menu-height);
}

/* Hide the OLD bottom navbar and sidebars */
.navbar {
  display: none !important;
}

#leftSidebar,
#rightSidebar {
  display: none !important;
}

#overlay {
  display: none !important;
}

/* Remove the old sidebar margins on #mainArea */
#mainArea {
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* -----------------------------------------------
   RESPONSIVE ‚Äî MOBILE FIRST
   ----------------------------------------------- */

/* Small phones (320px+) ‚Äî base styles above handle this */

/* Larger phones (480px+) */
@media (min-width: 480px) {
  .mega-item {
    padding: 0 24px;
    font-size: 14px;
  }

  .stats-row {
    grid-template-columns: repeat(4, 1fr);
  }

  .panel-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Tablets (768px+) */
@media (min-width: 768px) {
  .mega-item {
    padding: 0 28px;
    font-size: 15px;
  }

  .panel-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .mega-panel-inner {
    padding: 24px 32px;
  }
}

/* Desktop (1024px+) */
@media (min-width: 1024px) {
  .mega-item {
    padding: 0 32px;
  }

  .panel-grid {
    grid-template-columns: repeat(4, 1fr);
  }

  .mega-panel-inner {
    max-width: 1200px;
    margin: 0 auto;
    padding: 28px 40px;
  }
}

/* -----------------------------------------------
   ACCESSIBILITY
   ----------------------------------------------- */
.mega-item:focus-visible,
.panel-card:focus-visible,
.tool-row:focus-visible,
.mega-arrow:focus-visible {
  outline: 2px solid var(--color-primary, #539bf5);
  outline-offset: -2px;
}

@media (prefers-reduced-motion: reduce) {
  .mega-panel,
  .mega-panel-inner,
  .mega-overlay,
  .mega-item::after {
    transition-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
  }
}

/* -----------------------------------------------
   LIGHT THEME OVERRIDES
   ----------------------------------------------- */
[data-theme="light"] {
  --menu-bg: #ffffff;
  --menu-border: #d0d7de;
  --menu-item-color: #656d76;
  --menu-item-hover: #0969da;
  --menu-item-active: #1f2328;
  --menu-panel-bg: #ffffff;
  --menu-panel-border: #d0d7de;
}

[data-theme="light"] .mega-overlay {
  background: rgba(0, 0, 0, 0.12);
}

[data-theme="light"] .mega-arrow-left {
  background: linear-gradient(to right, #ffffff 60%, transparent);
}

[data-theme="light"] .mega-arrow-right {
  background: linear-gradient(to left, #ffffff 60%, transparent);
}

[data-theme="light"] .panel-card:hover {
  background: rgba(9, 105, 218, 0.04);
}

[data-theme="light"] .stat-block {
  background: rgba(0, 0, 0, 0.02);
  border-color: rgba(0, 0, 0, 0.06);
}

[data-theme="light"] .tool-row:hover {
  background: rgba(0, 0, 0, 0.04);
}

[data-theme="light"] .profile-banner {
  background: linear-gradient(135deg, rgba(9, 105, 218, 0.06), rgba(9, 105, 218, 0.02));
  border-color: rgba(9, 105, 218, 0.15);
}

/* -----------------------------------------------
   PRINT ‚Äî hide nav entirely
   ----------------------------------------------- */
@media print {
  .mega-nav,
  .mega-overlay,
  .mega-panel {
    display: none !important;
  }

  body {
    padding-top: 0;
  }
}








/* ================================================
   ENHANCED ANIMATIONS & SEARCH
   ================================================ */

/* -----------------------------------------------
   PANEL ANIMATIONS ‚Äî Refined
   Panel opens first, then content fades in
   ----------------------------------------------- */
.mega-panel {
  position: fixed;
  top: var(--menu-height);
  left: 0;
  right: 0;
  height: 0;
  overflow: hidden;
  background: var(--menu-panel-bg);
  border-bottom: 1px solid transparent;
  z-index: calc(var(--menu-z) - 1);
  will-change: height, opacity;
  transition:
    height 350ms cubic-bezier(0.4, 0, 0.2, 1),
    height 350ms linear(0, 0.264 3.7%, 0.49 7.4%, 0.692 11.3%, 0.864 15.3%, 0.937 17.3%, 1.005 19.4%, 1.065 21.5%, 1.12 23.7%, 1.167 25.9%, 1.206 28.1%, 1.24 30.4%, 1.267 32.8%, 1.283 34.6%, 1.296 36.4%, 1.305 38.3%, 1.311 40.2%, 1.314 42.2%, 1.313 44.2%, 1.309 46.4%, 1.301 48.6%, 1.282 52.5%, 1.252 56.9%, 1.217 61.3%, 1.105 74.4%, 1.074 78.6%, 1.048 82.5%, 1.026 86.9%, 1.011 91.1%, 1.002 95.4%, 1),
    opacity 300ms ease,
    border-color 0s linear 350ms;
  opacity: 0;
}

.mega-panel.open {
  height: var(--menu-panel-max);
  opacity: 1;
  border-bottom-color: var(--menu-panel-border);
  transition:
    height 350ms cubic-bezier(0.4, 0, 0.2, 1),
    height 350ms linear(0, 0.264 3.7%, 0.49 7.4%, 0.692 11.3%, 0.864 15.3%, 0.937 17.3%, 1.005 19.4%, 1.065 21.5%, 1.12 23.7%, 1.167 25.9%, 1.206 28.1%, 1.24 30.4%, 1.267 32.8%, 1.283 34.6%, 1.296 36.4%, 1.305 38.3%, 1.311 40.2%, 1.314 42.2%, 1.313 44.2%, 1.309 46.4%, 1.301 48.6%, 1.282 52.5%, 1.252 56.9%, 1.217 61.3%, 1.105 74.4%, 1.074 78.6%, 1.048 82.5%, 1.026 86.9%, 1.011 91.1%, 1.002 95.4%, 1),
    opacity 300ms ease,
    border-color 0s linear 0s;
}

/* Content fades in AFTER panel opens */
.mega-panel-inner {
  opacity: 0;
  transform: translateY(-12px);
  transition: 
    opacity 200ms ease,
    transform 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.mega-panel.open .mega-panel-inner {
  opacity: 1;
  transform: translateY(0);
  transition: 
    opacity 280ms ease 180ms,
    transform 280ms cubic-bezier(0.16, 1, 0.3, 1) 180ms;
}

/* SWAPPING MODE: fast content swap when panel stays open */
.mega-panel.swapping .mega-panel-inner {
  opacity: 0;
  transform: scale(0.98) translateY(-4px);
  transition: 
    opacity 140ms ease,
    transform 140ms ease;
}

.mega-panel.open.swapping .mega-panel-inner {
  opacity: 1;
  transform: scale(1) translateY(0);
  transition: 
    opacity 180ms ease 80ms,
    transform 180ms cubic-bezier(0.16, 1, 0.3, 1) 80ms;
}

/* Navbar expands when panel opens */
body.mega-menu-open .mega-nav {
  height: 45px;
  transition: height 350ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* -----------------------------------------------
   SEARCH PANEL ‚Äî Apple + GitHub Fusion
   ----------------------------------------------- */
#panelSearch .mega-panel-inner {
  max-width: 720px;
  margin: 0 auto;
}

.search-container {
  position: relative;
}

/* Search Input */
.search-input-wrapper {
  position: relative;
  margin-bottom: 24px;
  opacity: 0;
  transform: scale(0.94) translateY(-8px);
  animation: searchInputReveal 400ms cubic-bezier(0.16, 1, 0.3, 1) 200ms forwards;
}

@keyframes searchInputReveal {
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.search-input {
  width: 100%;
  height: 56px;
  padding: 0 24px 0 60px;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.08);
  border-radius: 28px;
  font-size: 17px;
  font-weight: 400;
  color: var(--color-text, #adbac7);
  font-family: var(--font-text);
  transition: all 280ms cubic-bezier(0.4, 0, 0.2, 1);
  outline: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

.search-input::placeholder {
  color: var(--color-text-muted, #636e7b);
  font-weight: 400;
}

.search-input:focus {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--color-primary, #539bf5);
  box-shadow: 
    0 0 0 4px rgba(83, 155, 245, 0.12),
    0 8px 24px rgba(0, 0, 0, 0.12);
  transform: translateY(-1px);
}

.search-icon {
  position: absolute;
  left: 22px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--color-text-muted, #636e7b);
  font-size: 20px;
  pointer-events: none;
  transition: color 200ms ease;
}

.search-input:focus ~ .search-icon {
  color: var(--color-primary, #539bf5);
}

.search-clear {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.08);
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
  display: none;
  align-items: center;
  justify-content: center;
  transition: all 150ms ease;
}

.search-input:not(:placeholder-shown) ~ .search-clear {
  display: flex;
}

.search-clear:hover {
  background: rgba(255, 255, 255, 0.12);
  color: var(--color-text);
}

/* Search Results Container */
.search-results {
  max-height: 280px;
  overflow-y: auto;
  padding-right: 4px;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.1) transparent;
}

.search-results::-webkit-scrollbar {
  width: 6px;
}

.search-results::-webkit-scrollbar-track {
  background: transparent;
}

.search-results::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.search-results::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* Search Result Item */
.search-result-item {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 12px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: all 220ms cubic-bezier(0.4, 0, 0.2, 1);
  opacity: 0;
  transform: translateX(-12px);
  animation: searchResultSlide 300ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.search-result-item:nth-child(1) { animation-delay: 80ms; }
.search-result-item:nth-child(2) { animation-delay: 130ms; }
.search-result-item:nth-child(3) { animation-delay: 180ms; }
.search-result-item:nth-child(4) { animation-delay: 230ms; }
.search-result-item:nth-child(5) { animation-delay: 280ms; }
.search-result-item:nth-child(6) { animation-delay: 330ms; }
.search-result-item:nth-child(7) { animation-delay: 380ms; }
.search-result-item:nth-child(8) { animation-delay: 430ms; }

@keyframes searchResultSlide {
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.search-result-item:hover {
  background: rgba(83, 155, 245, 0.1);
  border-color: rgba(83, 155, 245, 0.3);
  transform: translateX(4px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.search-result-item:active {
  transform: translateX(2px) scale(0.99);
}

.search-result-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(83, 155, 245, 0.12);
  border-radius: 10px;
  font-size: 18px;
  flex-shrink: 0;
  color: var(--color-primary, #539bf5);
}

.search-result-content {
  flex: 1;
  min-width: 0;
}

.search-result-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text, #adbac7);
  margin-bottom: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.search-result-name mark {
  background: rgba(83, 155, 245, 0.25);
  color: var(--color-primary, #539bf5);
  padding: 1px 4px;
  border-radius: 3px;
  font-weight: 700;
}

.search-result-path {
  font-size: 12px;
  color: var(--color-text-muted, #636e7b);
  font-family: var(--font-mono, monospace);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.search-result-type {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-muted, #636e7b);
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 6px;
  flex-shrink: 0;
}

/* Empty State */
.search-empty {
  text-align: center;
  padding: 48px 24px;
  color: var(--color-text-muted, #636e7b);
  font-size: 14px;
}

.search-empty-icon {
  font-size: 48px;
  opacity: 0.3;
  margin-bottom: 16px;
}

/* Loading State */
.search-loading {
  text-align: center;
  padding: 32px;
  color: var(--color-text-muted);
}

.search-loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid rgba(83, 155, 245, 0.2);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: searchSpin 800ms linear infinite;
  margin: 0 auto 12px;
}

@keyframes searchSpin {
  to { transform: rotate(360deg); }
}

/* Light theme adjustments */
[data-theme="light"] .search-input {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .search-input:focus {
  background: rgba(0, 0, 0, 0.06);
  box-shadow: 
    0 0 0 4px rgba(9, 105, 218, 0.12),
    0 8px 24px rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .search-result-item {
  background: rgba(0, 0, 0, 0.02);
  border-color: rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .search-result-item:hover {
  background: rgba(9, 105, 218, 0.06);
  border-color: rgba(9, 105, 218, 0.2);
}
</style>



<!-------
     Progress Loading Bar
                      ------->
<div id="pageProgress" class="ph-progress page-progress">
    <div class="progress-bar">
      <div class="ph-fill progress-fill"></div>
    </div>
  </div>




<!-------
         Top NAVBar
                  ----------->
<!-- ====================================================
     MEGA MENU ‚Äî place right after <body>
     ==================================================== -->
<div id="megaOverlay" class="mega-overlay" aria-hidden="true"></div>

<nav class="mega-nav" role="navigation" aria-label="Main navigation">

  <!-- Left scroll arrow -->
  <button
    id="megaArrowLeft"
    class="mega-arrow mega-arrow-left disabled"
    aria-label="Scroll menu left"
    aria-disabled="true"
  >
    <svg viewBox="0 0 16 16"><path d="M9.78 12.78a.75.75 0 0 1-1.06 0L4.47 8.53a.75.75 0 0 1 0-1.06l4.25-4.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L6.06 8l3.72 3.72a.75.75 0 0 1 0 1.06Z"/></svg>
  </button>

  <!-- Scrollable track -->
  <div id="megaTrack" class="mega-track" role="menubar">
    <div class="mega-items">

      <button class="mega-item" data-panel="panelNavigate" role="menuitem" aria-haspopup="true" aria-expanded="false">
        Navigate
      </button>

      <button class="mega-item" data-panel="panelFiles" role="menuitem" aria-haspopup="true" aria-expanded="false">
        Files
      </button>

<button class="mega-item" data-panel="panelSearch" role="menuitem" aria-haspopup="true" aria-expanded="false">
  Search
</button>

      <button class="mega-item" data-panel="panelStats" role="menuitem" aria-haspopup="true" aria-expanded="false">
        Stats
      </button>

      <button class="mega-item" data-panel="panelTools" role="menuitem" aria-haspopup="true" aria-expanded="false">
        Tools
      </button>

      <button class="mega-item" data-panel="panelProfile" role="menuitem" aria-haspopup="true" aria-expanded="false">
        Profile
      </button>

    </div>
  </div>

  <!-- Right scroll arrow -->
  <button
    id="megaArrowRight"
    class="mega-arrow mega-arrow-right"
    aria-label="Scroll menu right"
    aria-disabled="false"
  >
    <svg viewBox="0 0 16 16"><path d="M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06Z"/></svg>
  </button>

</nav>

<!-- =============================================
     PANELS (slide down beneath the nav)
     ============================================= -->

<!-- NAVIGATE -->
<div id="panelNavigate" class="mega-panel" role="region" aria-label="Navigation panel">
  <div class="mega-panel-inner">
    <div class="panel-section-title">Go To</div>
    <div class="panel-grid">

      <button class="panel-card" data-menu-action="go-repos">
        <div class="panel-card-icon blue"><i class="fas fa-layer-group"></i></div>
        <div class="panel-card-body">
          <div class="panel-card-title">Repositories</div>
          <div class="panel-card-desc">Browse your repos</div>
        </div>
        <span class="panel-card-chevron"><i class="fas fa-chevron-right"></i></span>
      </button>

      <button class="panel-card" data-menu-action="go-root">
        <div class="panel-card-icon green"><i class="fas fa-home"></i></div>
        <div class="panel-card-body">
          <div class="panel-card-title">Root</div>
          <div class="panel-card-desc">Go to root directory</div>
        </div>
        <span class="panel-card-chevron"><i class="fas fa-chevron-right"></i></span>
      </button>

      <button class="panel-card" data-menu-action="go-code">
        <div class="panel-card-icon purple"><i class="fas fa-code"></i></div>
        <div class="panel-card-body">
          <div class="panel-card-title">Code</div>
          <div class="panel-card-desc">File explorer view</div>
        </div>
        <span class="panel-card-chevron"><i class="fas fa-chevron-right"></i></span>
      </button>

      <button class="panel-card" data-menu-action="go-repos">
        <div class="panel-card-icon orange"><i class="fas fa-code-branch"></i></div>
        <div class="panel-card-body">
          <div class="panel-card-title">Branches</div>
          <div class="panel-card-desc">Manage branches</div>
        </div>
        <span class="panel-card-chevron"><i class="fas fa-chevron-right"></i></span>
      </button>

    </div>
  </div>
</div>

<!-- FILES -->
<div id="panelFiles" class="mega-panel" role="region" aria-label="File actions panel">
  <div class="mega-panel-inner">
    <div class="panel-section-title">Quick Actions</div>
    <div class="panel-grid">

      <button class="panel-card" data-menu-action="new-file">
        <div class="panel-card-icon green"><i class="fas fa-file-circle-plus"></i></div>
        <div class="panel-card-body">
          <div class="panel-card-title">New File</div>
          <div class="panel-card-desc">Create a new file</div>
        </div>
        <span class="panel-card-chevron"><i class="fas fa-chevron-right"></i></span>
      </button>

      <button class="panel-card" data-menu-action="upload">
        <div class="panel-card-icon blue"><i class="fas fa-upload"></i></div>
        <div class="panel-card-body">
          <div class="panel-card-title">Upload</div>
          <div class="panel-card-desc">Upload files</div>
        </div>
        <span class="panel-card-chevron"><i class="fas fa-chevron-right"></i></span>
      </button>

      <button class="panel-card" data-menu-action="import">
        <div class="panel-card-icon purple"><i class="fas fa-download"></i></div>
        <div class="panel-card-body">
          <div class="panel-card-title">Import</div>
          <div class="panel-card-desc">Import from URL</div>
        </div>
        <span class="panel-card-chevron"><i class="fas fa-chevron-right"></i></span>
      </button>

      <button class="panel-card" data-menu-action="new-folder">
        <div class="panel-card-icon orange"><i class="fas fa-folder-plus"></i></div>
        <div class="panel-card-body">
          <div class="panel-card-title">New Folder</div>
          <div class="panel-card-desc">Create a folder</div>
        </div>
        <span class="panel-card-chevron"><i class="fas fa-chevron-right"></i></span>
      </button>

    </div>
  </div>
</div>

<!-- STATS -->
<div id="panelStats" class="mega-panel" role="region" aria-label="Statistics panel">
  <div class="mega-panel-inner">
    <div class="panel-section-title">Overview</div>
    <div class="stats-row">

      <div class="stat-block">
        <div class="stat-block-icon panel-card-icon blue"><i class="fas fa-file"></i></div>
        <div>
          <div class="stat-block-value" id="megaStatFiles">0</div>
          <div class="stat-block-label">Files</div>
        </div>
      </div>

      <div class="stat-block">
        <div class="stat-block-icon panel-card-icon green"><i class="fas fa-code-commit"></i></div>
        <div>
          <div class="stat-block-value" id="megaStatCommits">0</div>
          <div class="stat-block-label">Commits</div>
        </div>
      </div>

      <div class="stat-block">
        <div class="stat-block-icon panel-card-icon orange"><i class="fas fa-database"></i></div>
        <div>
          <div class="stat-block-value" id="megaStatStorage">0 KB</div>
          <div class="stat-block-label">Storage</div>
        </div>
      </div>

      <div class="stat-block">
        <div class="stat-block-icon panel-card-icon red"><i class="fas fa-code-branch"></i></div>
        <div>
          <div class="stat-block-value" id="megaStatBranches">1</div>
          <div class="stat-block-label">Branches</div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- TOOLS -->
<div id="panelTools" class="mega-panel" role="region" aria-label="Tools panel">
  <div class="mega-panel-inner">
    <div class="panel-section-title">Settings & Tools</div>

    <button class="tool-row" data-menu-action="toggle-theme">
      <div class="tool-row-icon"><i class="fas fa-moon mega-theme-icon"></i></div>
      <span class="tool-row-text mega-theme-label">Dark Mode</span>
      <span class="tool-row-hint"></span>
      <span class="tool-row-chevron"><i class="fas fa-chevron-right"></i></span>
    </button>

    <button class="tool-row" data-menu-action="help">
      <div class="tool-row-icon"><i class="fas fa-question-circle"></i></div>
      <span class="tool-row-text">Help & Docs</span>
      <span class="tool-row-hint"></span>
      <span class="tool-row-chevron"><i class="fas fa-chevron-right"></i></span>
    </button>

    <button class="tool-row" data-menu-action="settings">
      <div class="tool-row-icon"><i class="fas fa-cog"></i></div>
      <span class="tool-row-text">Preferences</span>
      <span class="tool-row-hint"></span>
      <span class="tool-row-chevron"><i class="fas fa-chevron-right"></i></span>
    </button>

  </div>
</div>

<!-- PROFILE -->
<div id="panelProfile" class="mega-panel" role="region" aria-label="Profile panel">
  <div class="mega-panel-inner">

    <div class="profile-banner">
      <img src="https://dev.wuaze.com/banner.png" alt="Profile" class="profile-banner-avatar" />
      <div>
        <div class="profile-banner-name">GitDev</div>
        <div class="profile-banner-role">GitHub File Manager</div>
      </div>
    </div>

    <div style="margin-top: 16px;">
      <div class="panel-section-title">Repository</div>
      <div class="stats-row">
        <div class="stat-block">
          <div class="stat-block-icon panel-card-icon blue"><i class="fas fa-layer-group"></i></div>
          <div>
            <div class="stat-block-value" id="megaRepoCount">0</div>
            <div class="stat-block-label">Repos</div>
          </div>
        </div>
        <div class="stat-block">
          <div class="stat-block-icon panel-card-icon green"><i class="fas fa-file"></i></div>
          <div>
            <div class="stat-block-value" id="megaProfileFiles">0</div>
            <div class="stat-block-label">Files</div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- SEARCH PANEL -->
<div id="panelSearch" class="mega-panel" role="region" aria-label="Search panel">
  <div class="mega-panel-inner">
    <div class="search-container">
      
      <div class="search-input-wrapper">
        <input 
          type="text" 
          id="megaSearchInput" 
          class="search-input" 
          placeholder="Search files and content..." 
          autocomplete="off"
          spellcheck="false"
        />
        <i class="fas fa-search search-icon"></i>
        <button id="megaSearchClear" class="search-clear" aria-label="Clear search">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div id="megaSearchResults" class="search-results">
        <div class="search-empty">
          <div class="search-empty-icon">üîç</div>
          Start typing to search files...
        </div>
      </div>

    </div>
  </div>
</div>

<div class="topBox">
    <!-- B R E A D C R U M B S -->
  <div class="breadCrumbsWrapper" id="breadCrumbsWrapper">
    <div class="breadCrumbsContainer" id="breadCrumbsContainer">
      <nav class="breadcrumbNav" id="pathBreadcrumb">
        <div class="breadCrumbContainer"></div>
      </nav>
    </div>
  </div>
</div>






<!--  P A G E  W R A P P E R 
===================================================
===================================================-->
<main id="mainArea">
  
  




<!-------
     Repository Selector View
                          ---->
<div
  data-page="repo"
  id="repoSelectorView"
  class="pages max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-6">


  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-github-fg-default">Your Repositories</h2>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="repoList">
  </div>
</div><!-- E N D -->



<!-------
     File Explorer View
                    ---------->
<div
  data-page="explorer"
  id="explorerView"
  class="pages max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-6">


  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center space-x-3">
      <div class="relative">
        <button id="branchSelector" class="inline-flex items-center px-3 py-1.5 border border-github-border-default rounded-md text-sm font-medium text-github-fg-default bg-github-btn-secondary-bg hover:bg-github-btn-secondary-hover transition-colors">
          <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 16 16">
            <path d="M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z" />
          </svg>
          <span id="currentBranch">main</span>
          <svg class="w-4 h-4 ml-1 text-github-fg-muted" fill="currentColor" viewBox="0 0 16 16">
            <path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z" />
          </svg>
        </button>
        <div id="branchDropdown" class="hidden absolute z-10 mt-1 w-56 bg-github-canvas-overlay border border-github-border-default rounded-md shadow-lg">
          <div class="p-1">
            <input type="text" placeholder="Find or create branch..." class="w-full px-2 py-1 mb-1 bg-github-canvas-inset border border-github-border-default rounded text-sm text-github-fg-default">
            <div class="max-h-60 overflow-y-auto">
              <div class="px-2 py-1 text-sm text-github-fg-default hover:bg-github-canvas-subtle cursor-pointer">main</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="flex items-center space-x-2">
      <button data-action="create-file" class="inline-flex items-center px-3 py-1.5 bg-github-btn-primary-bg hover:bg-github-btn-primary-hover text-white rounded-md text-sm font-medium transition-colors">
        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 16 16">
          <path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z" />
        </svg>
        New
      </button>
      <button class="inline-flex items-center px-3 py-1.5 border border-github-border-default rounded-md text-sm font-medium text-github-fg-default bg-github-btn-secondary-bg hover:bg-github-btn-secondary-hover transition-colors">
        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 16 16">
          <path d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z" />
          <path d="M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z" />
        </svg>
        Code
      </button>
    </div>
  </div>

  <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg overflow-hidden">
    <div class="px-4 py-3 border-b border-github-border-muted bg-github-canvas-overlay">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <img src="https://github.com/github.png" alt="User" class="w-6 h-6 rounded-full">
          <div class="flex items-center space-x-2">
            <span class="text-github-fg-default font-medium">
              <!-- FAR LEFT SIDE -->
            </span>
            <span class="text-github-fg-default">
              <!-- LEFT SIDE -->
              
              <button
                  onclick="showImportModal()"
                  class="flex items-center gap-2 px-4 py-2 bg-github-canvas-overlay hover:bg-github-canvas-subtle border border-github-border-default rounded-lg transition-all"
                  data-tooltip="Import from URL">
                <i class="fas fa-download"></i>
                <span class="hidden sm:inline">Import</span>
              </button>
              
            </span>
          </div>
        </div>
        <div class="flex items-center space-x-4 text-sm text-github-fg-muted">
          <span id="lastCommitTime">
            <!-- RIGHT SIDE -->
          </span>
          <span class="font-mono" id="commitHash">
            <!-- FAR RIGHT SIDE -->
            
            <button
                onclick="showUploadModal()"
                class="flex items-center gap-2 px-4 py-2 bg-github-success-emphasis hover:bg-github-success-fg text-white rounded-lg transition-all"
                data-tooltip="Upload files (Ctrl+U)">
              <i class="fas fa-upload"></i>
              <span class="hidden sm:inline">Upload</span>
            </button>

          </span>
        </div>
      </div>
    </div>

    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-github-tableHeader">
          <tr>
            <th class="px-4 py-2 text-left text-sm font-medium text-github-fg-default">Name</th>
            <th class="px-4 py-2 text-left text-sm font-medium text-github-fg-default">Last commit message</th>
            <th class="px-4 py-2 text-right text-sm font-medium text-github-fg-default">Updated</th>
          </tr>
        </thead>
        <tbody id="fileListBody" class="divide-y divide-github-border-muted">
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2">
      <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold text-github-fg-default">README.md</h2>
          <button class="text-github-fg-muted hover:text-github-fg-default">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z" />
            </svg>
          </button>
        </div>
        <div class="prose prose-invert max-w-none" id="readmeContent">
          <h1>GitDev</h1>
          <p>A professional file explorer and editor interface that mimics GitHub's design and functionality with local storage.</p>
        </div>
      </div>
    </div>

    <div class="space-y-6">
      <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg p-4">
        <h3 class="font-semibold text-github-fg-default mb-3">About</h3>
        <p class="text-sm text-github-fg-muted mb-4" id="repoDescription">GitDev with Local Storage</p>
        <div class="space-y-2 text-sm">
          <div class="flex items-center space-x-2">
            <svg class="w-4 h-4 text-github-fg-muted" fill="currentColor" viewBox="0 0 16 16">
              <path d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z" />
            </svg>
            <span class="text-github-fg-muted">Local file management system</span>
          </div>
        </div>
      </div>

      <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg p-4">
        <h3 class="font-semibold text-github-fg-default mb-3">Languages</h3>
        <div class="space-y-2" id="languageStats">
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 rounded-full bg-orange-500"></div>
              <span class="text-github-fg-default">HTML</span>
            </div>
            <span class="text-github-fg-muted">47.2%</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
              <span class="text-github-fg-default">JavaScript</span>
            </div>
            <span class="text-github-fg-muted">43.8%</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 rounded-full bg-blue-500"></div>
              <span class="text-github-fg-default">CSS</span>
            </div>
            <span class="text-github-fg-muted">7.0%</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 rounded-full bg-purple-500"></div>
              <span class="text-github-fg-default">Other</span>
            </div>
            <span class="text-github-fg-muted">2.0%</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div><!-- E N D -->




<!-------
     File Viewer & File Editor
                          ---->
<div
  data-page="file"
  class="pages">

</div><!-- E N D -->




</main>
<!--
===================================================
  E N D  E N D  E N D  E N D  E N D  E N D  E N D
===================================================-->


<script>
/* ================================================
   MEGA MENU CONTROLLER ‚Äî Enhanced Edition
   ================================================ */

(function () {
  "use strict";

  /* STATE */
  let activePanel = null;
  let isPanelOpen = false;
  let isAnimating = false;
  let searchTimeout = null;

  /* CONFIG */
  const SCROLL_STEP = 180;
  const SCROLL_CHECK_DEBOUNCE = 50;
  const SEARCH_DELAY = 300;

  /* DOM REFS */
  let track, arrowLeft, arrowRight, overlay;
  let allItems = [];
  let allPanels = [];

  /* ============================================
     INIT
     ============================================ */
  function init() {
    track = document.getElementById("megaTrack");
    arrowLeft = document.getElementById("megaArrowLeft");
    arrowRight = document.getElementById("megaArrowRight");
    overlay = document.getElementById("megaOverlay");
    allItems = Array.from(document.querySelectorAll(".mega-item"));
    allPanels = Array.from(document.querySelectorAll(".mega-panel"));

    if (!track || !arrowLeft || !arrowRight) {
      console.warn("Mega-menu: missing DOM elements");
      return;
    }

    setupArrows();
    setupMenuItems();
    setupOverlay();
    setupKeyboard();
    setupSearch();
    initTouchScroll();
    syncStats();

    console.log("‚úÖ Mega-menu initialized");
  }

  /* ============================================
     ARROW SCROLL CONTROLS
     ============================================ */
  function setupArrows() {
    arrowLeft.addEventListener("click", () => scrollTrack(-SCROLL_STEP));
    arrowRight.addEventListener("click", () => scrollTrack(SCROLL_STEP));

    let scrollTimer;
    track.addEventListener("scroll", () => {
      clearTimeout(scrollTimer);
      scrollTimer = setTimeout(updateArrows, SCROLL_CHECK_DEBOUNCE);
    });

    updateArrows();
    window.addEventListener("resize", updateArrows);
  }

  function scrollTrack(delta) {
    track.scrollBy({ left: delta, behavior: "smooth" });
  }

  function updateArrows() {
    const scrollLeft = Math.round(track.scrollLeft);
    const maxScroll = track.scrollWidth - track.clientWidth;

    arrowLeft.classList.toggle("disabled", scrollLeft <= 1);
    arrowLeft.setAttribute("aria-disabled", scrollLeft <= 1);

    arrowRight.classList.toggle("disabled", scrollLeft >= maxScroll - 1);
    arrowRight.setAttribute("aria-disabled", scrollLeft >= maxScroll - 1);
  }

  /* ============================================
     MENU ITEMS
     ============================================ */
  function setupMenuItems() {
    allItems.forEach((item) => {
      item.addEventListener("click", () => {
        const panelId = item.getAttribute("data-panel");
        const action = item.getAttribute("data-action");

        if (action) {
          handleDirectAction(action);
        } else if (panelId) {
          togglePanel(panelId, item);
        }
      });
    });
  }

  function togglePanel(panelId, triggerItem) {
    if (isAnimating) return;

    const targetPanel = document.getElementById(panelId);
    if (!targetPanel) return;

    // Clicking the same open panel ‚Üí close
    if (activePanel === panelId && isPanelOpen) {
      closeAllPanels();
      return;
    }

    // Panel already open ‚Üí swap content
    if (isPanelOpen && activePanel !== panelId) {
      swapPanelContent(panelId, triggerItem);
      return;
    }

    // Otherwise ‚Üí full open animation
    openPanel(panelId, triggerItem);
  }

  function openPanel(panelId, triggerItem) {
    isAnimating = true;

    const targetPanel = document.getElementById(panelId);

    // Close all
    allPanels.forEach((p) => p.classList.remove("open", "swapping"));
    allItems.forEach((i) => {
      i.classList.remove("active");
      i.setAttribute("aria-expanded", "false");
    });

    // Open target
    targetPanel.classList.add("open");
    triggerItem.classList.add("active");
    triggerItem.setAttribute("aria-expanded", "true");
    activePanel = panelId;
    isPanelOpen = true;

    // Show overlay & blur
    if (overlay) overlay.classList.add("active");
    blurMainContent();
    document.body.classList.add("mega-menu-open");

    // If search panel, focus input
    if (panelId === "panelSearch") {
      setTimeout(() => {
        const input = document.getElementById("megaSearchInput");
        if (input) input.focus();
      }, 400);
    }

    setTimeout(() => {
      isAnimating = false;
    }, 450);
  }

  function swapPanelContent(newPanelId, triggerItem) {
    isAnimating = true;

    const currentPanel = document.getElementById(activePanel);
    const newPanel = document.getElementById(newPanelId);

    // Add swapping class for fast fade
    currentPanel.classList.add("swapping");

    setTimeout(() => {
      // Switch panels
      currentPanel.classList.remove("open", "swapping");
      newPanel.classList.add("open", "swapping");

      // Update active item
      allItems.forEach((i) => {
        i.classList.remove("active");
        i.setAttribute("aria-expanded", "false");
      });
      triggerItem.classList.add("active");
      triggerItem.setAttribute("aria-expanded", "true");

      activePanel = newPanelId;

      // If switching to search, focus input
      if (newPanelId === "panelSearch") {
        setTimeout(() => {
          const input = document.getElementById("megaSearchInput");
          if (input) input.focus();
        }, 260);
      }

      // Remove swapping class
      setTimeout(() => {
        newPanel.classList.remove("swapping");
        isAnimating = false;
      }, 260);
    }, 140);
  }

  function closeAllPanels() {
    if (isAnimating) return;
    isAnimating = true;

    allPanels.forEach((p) => p.classList.remove("open", "swapping"));
    allItems.forEach((i) => {
      i.classList.remove("active");
      i.setAttribute("aria-expanded", "false");
    });

    activePanel = null;
    isPanelOpen = false;

    if (overlay) overlay.classList.remove("active");
    unblurMainContent();
    document.body.classList.remove("mega-menu-open");

    setTimeout(() => {
      isAnimating = false;
    }, 400);
  }

  function blurMainContent() {
    const mainArea = document.getElementById("mainArea");
    if (mainArea) {
      mainArea.style.filter = "blur(4px) brightness(0.85)";
      mainArea.style.transition = "filter 350ms cubic-bezier(0.4, 0, 0.2, 1)";
      mainArea.style.pointerEvents = "none";
    }
  }

  function unblurMainContent() {
    const mainArea = document.getElementById("mainArea");
    if (mainArea) {
      mainArea.style.filter = "";
      mainArea.style.pointerEvents = "";
    }
  }

  /* ============================================
     DIRECT ACTIONS (items without panels)
     ============================================ */
  function handleDirectAction(action) {
    closeAllPanels();

    switch (action) {
      case "search":
        // Open search panel
        const searchBtn = document.querySelector('[data-panel="panelSearch"]');
        if (searchBtn) {
          setTimeout(() => togglePanel("panelSearch", searchBtn), 100);
        }
        break;
      default:
        console.log("Direct action:", action);
    }
  }

  /* ============================================
     PANEL ACTIONS (delegated clicks)
     ============================================ */
  document.addEventListener("click", (e) => {
    const actionBtn = e.target.closest("[data-menu-action]");
    if (!actionBtn) return;

    const action = actionBtn.getAttribute("data-menu-action");
    handlePanelAction(action);
    closeAllPanels();
  });

  function handlePanelAction(action) {
    switch (action) {
      case "go-repos":
        navigateToPage("repo");
        break;
      case "go-root":
        navigateToPage("explorer");
        if (typeof navigateToRoot === "function") navigateToRoot();
        break;
      case "go-code":
        navigateToPage("explorer");
        break;
      case "new-file":
        showModal("createFileModal");
        break;
      case "upload":
        if (typeof showUploadModal === "function") showUploadModal();
        break;
      case "import":
        if (typeof showImportModal === "function") showImportModal();
        break;
      case "new-folder":
        if (typeof showCreateFolderModal === "function") showCreateFolderModal();
        break;
      case "toggle-theme":
        toggleThemeHelper();
        break;
      case "help":
        if (typeof showHelp === "function") showHelp();
        break;
      default:
        console.log("Panel action:", action);
    }
  }

  function navigateToPage(pageName) {
    document.querySelectorAll(".pages").forEach((p) => {
      p.classList.remove("show");
      p.classList.add("hide");
    });

    const target = document.querySelector(`[data-page="${pageName}"]`);
    if (target) {
      target.classList.remove("hide");
      target.classList.add("show");
    }
  }

  function showModal(modalId) {
    const modal = document.getElementById(modalId);
    if (!modal) return;
    modal.classList.remove("hidden");
    modal.style.display = "flex";
  }

  /* ============================================
     OVERLAY & KEYBOARD
     ============================================ */
  function setupOverlay() {
    if (overlay) {
      overlay.addEventListener("click", closeAllPanels);
    }
  }

  function setupKeyboard() {
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && isPanelOpen) {
        closeAllPanels();
      }
    });
  }

  /* ============================================
     SEARCH FUNCTIONALITY
     ============================================ */
  function setupSearch() {
    const input = document.getElementById("megaSearchInput");
    const clearBtn = document.getElementById("megaSearchClear");

    if (!input) return;

    input.addEventListener("input", (e) => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => performSearch(e.target.value), SEARCH_DELAY);
    });

    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        clearTimeout(searchTimeout);
        performSearch(e.target.value);
      }
    });

    if (clearBtn) {
      clearBtn.addEventListener("click", () => {
        input.value = "";
        input.focus();
        performSearch("");
      });
    }
  }

  function performSearch(query) {
    const container = document.getElementById("megaSearchResults");
    if (!container) return;

    if (!query.trim()) {
      container.innerHTML = `
        <div class="search-empty">
          <div class="search-empty-icon">üîç</div>
          Start typing to search files...
        </div>
      `;
      return;
    }

    try {
      const currentRepo = localStorage.getItem("currentRepository");
      if (!currentRepo) {
        container.innerHTML = `
          <div class="search-empty">
            <div class="search-empty-icon">üìÅ</div>
            No repository selected
          </div>
        `;
        return;
      }

      const repoData = JSON.parse(localStorage.getItem(`repo_${currentRepo}`) || "{}");
      const files = repoData.files || {};
      const results = [];

      // Search file paths and content
      Object.keys(files).forEach((path) => {
        const file = files[path];
        const lowerQuery = query.toLowerCase();
        const lowerPath = path.toLowerCase();
        const pathMatch = lowerPath.includes(lowerQuery);
        const contentMatch = file.content && file.content.toLowerCase().includes(lowerQuery);

        if (pathMatch || contentMatch) {
          results.push({
            path,
            name: path.split("/").pop(),
            type: pathMatch ? "path" : "content",
            file,
          });
        }
      });

      displaySearchResults(results, query);
    } catch (e) {
      console.error("Search error:", e);
      container.innerHTML = `
        <div class="search-empty">
          <div class="search-empty-icon">‚ö†Ô∏è</div>
          Search error occurred
        </div>
      `;
    }
  }

  function displaySearchResults(results, query) {
    const container = document.getElementById("megaSearchResults");

    if (results.length === 0) {
      container.innerHTML = `
        <div class="search-empty">
          <div class="search-empty-icon">ü§∑</div>
          No results found for "<strong>${escapeHtml(query)}</strong>"
        </div>
      `;
      return;
    }

    const html = results
      .map(
        (result, index) => `
        <div class="search-result-item" data-file-path="${escapeHtml(result.path)}">
          <div class="search-result-icon">${getFileIcon(result.name)}</div>
          <div class="search-result-content">
            <div class="search-result-name">${highlightMatch(escapeHtml(result.name), query)}</div>
            <div class="search-result-path">${escapeHtml(result.path)}</div>
          </div>
          <span class="search-result-type">${result.type}</span>
        </div>
      `
      )
      .join("");

    container.innerHTML = html;

    // Add click handlers
    container.querySelectorAll(".search-result-item").forEach((item) => {
      item.addEventListener("click", function () {
        const filePath = this.getAttribute("data-file-path");
        openSearchResult(filePath);
        closeAllPanels();
      });
    });
  }

  function openSearchResult(filePath) {
    // Integrate with your existing file opening logic
    navigateToPage("file");
    if (typeof loadFileEditor === "function") {
      loadFileEditor(filePath);
    }
    console.log("Opening file:", filePath);
  }

  function highlightMatch(text, query) {
    const regex = new RegExp(`(${escapeRegex(query)})`, "gi");
    return text.replace(regex, "<mark>$1</mark>");
  }

  function getFileIcon(filename) {
    const ext = filename.split(".").pop().toLowerCase();
    const icons = {
      js: "üìú",
      jsx: "‚öõÔ∏è",
      ts: "üìò",
      tsx: "‚öõÔ∏è",
      html: "üåê",
      css: "üé®",
      scss: "üé®",
      json: "üìã",
      md: "üìù",
      txt: "üìÑ",
      py: "üêç",
      java: "‚òï",
      php: "üêò",
      rb: "üíé",
      go: "üêπ",
      rs: "ü¶Ä",
      c: "üîß",
      cpp: "üîß",
      svg: "üé®",
      png: "üñºÔ∏è",
      jpg: "üñºÔ∏è",
      gif: "üñºÔ∏è",
    };
    return icons[ext] || "üìÑ";
  }

  function escapeHtml(text) {
    const div = document.createElement("div");
    div.textContent = text;
    return div.innerHTML;
  }

  function escapeRegex(text) {
    return text.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  }

  /* ============================================
     THEME TOGGLE
     ============================================ */
  function toggleThemeHelper() {
    const html = document.documentElement;
    const current = html.getAttribute("data-theme");
    const next = current === "dark" ? "light" : "dark";
    html.setAttribute("data-theme", next);

    try {
      localStorage.setItem("theme", next);
    } catch (e) {}

    const icons = document.querySelectorAll(".mega-theme-icon, #themeIcon, #sidebarThemeIcon");
    icons.forEach((icon) => {
      icon.className = next === "dark" ? "fas fa-moon" : "fas fa-sun";
    });

    const labels = document.querySelectorAll(".mega-theme-label");
    labels.forEach((lbl) => {
      lbl.textContent = next === "dark" ? "Dark Mode" : "Light Mode";
    });
  }

  /* ============================================
     STATS SYNC
     ============================================ */
  function syncStats() {
    try {
      const repos = JSON.parse(localStorage.getItem("repositories") || "[]");
      const currentRepo = localStorage.getItem("currentRepository");
      const repoData = currentRepo ? JSON.parse(localStorage.getItem(`repo_${currentRepo}`) || "{}") : {};
      const files = repoData.files || {};
      const fileCount = Object.keys(files).length;

      let commitCount = 0;
      Object.values(files).forEach((f) => {
        commitCount += f.commits ? f.commits.length : 0;
      });

      const storageBytes = new Blob([JSON.stringify(files)]).size;
      const storageKB = Math.round(storageBytes / 1024);

      setTextById("megaStatFiles", fileCount);
      setTextById("megaStatCommits", commitCount);
      setTextById("megaStatStorage", `${storageKB} KB`);
      setTextById("megaStatBranches", "1");
      setTextById("megaRepoCount", repos.length);
      setTextById("megaProfileFiles", fileCount);
    } catch (e) {
      console.warn("Stats sync error:", e);
    }
  }

  function setTextById(id, text) {
    const el = document.getElementById(id);
    if (el) el.textContent = text;
  }

  /* ============================================
     TOUCH SCROLL
     ============================================ */
  function initTouchScroll() {
    let startX = 0;
    let scrollStart = 0;

    track.addEventListener(
      "touchstart",
      (e) => {
        startX = e.touches[0].clientX;
        scrollStart = track.scrollLeft;
      },
      { passive: true }
    );

    track.addEventListener(
      "touchmove",
      (e) => {
        const dx = startX - e.touches[0].clientX;
        track.scrollLeft = scrollStart + dx;
      },
      { passive: true }
    );

    track.addEventListener("touchend", updateArrows, { passive: true });
  }

  /* ============================================
     BOOT
     ============================================ */
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", init);
  } else {
    init();
  }

  /* Expose API */
  window.megaMenu = {
    close: closeAllPanels,
    syncStats,
    toggleTheme: toggleThemeHelper,
  };
})();
</script>



<!-- Modals -------------------------->
<div id="createFileModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
    <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg shadow-2xl w-full max-w-2xl animate-scale-in">
      <div class="px-6 py-4 border-b border-github-border-default">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold text-github-fg-default">Create new file</h3>
          <button data-action="hide-create-file-modal" class="text-github-fg-muted hover:text-github-fg-default transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16">
              <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z" />
            </svg>
          </button>
        </div>
      </div>

      <div class="p-6 space-y-6">
        <div>
          <label class="block text-sm font-medium text-github-fg-default mb-2">Name your file...</label>
          <div class="flex items-center bg-github-canvas-inset border border-github-border-default rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-github-accent-emphasis focus-within:border-transparent">
            <span class="px-3 py-2 bg-github-canvas-subtle border-r border-github-border-default text-github-fg-muted text-sm font-mono" id="currentPathPrefix">Repository/</span>
            <input type="text" id="newFileName" placeholder="filename.ext" class="flex-1 px-3 py-2 bg-transparent border-none text-github-fg-default placeholder-github-fg-muted focus:outline-none text-sm">
          </div>
          <p class="mt-1 text-xs text-github-fg-muted">The file extension will determine syntax highlighting</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-github-fg-default mb-2">Category (optional)</label>
          <input type="text" id="fileCategoryInput" maxlength="15" placeholder="e.g., Component, Utility, Config" class="w-full px-3 py-2 bg-github-canvas-inset border border-github-border-default rounded-md text-github-fg-default placeholder-github-fg-muted focus:outline-none focus:ring-2 focus:ring-github-accent-emphasis focus:border-transparent">
          <p class="mt-1 text-xs text-github-fg-muted">Maximum 15 characters</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-github-fg-default mb-2">Tags (optional)</label>
          <div class="space-y-2">
            <div id="selectedTags" class="flex flex-wrap gap-2 min-h-[2rem]">
            </div>
            <div class="flex items-center space-x-2">
              <input type="text" id="tagInput" placeholder="Add a tag..." class="flex-1 px-3 py-2 bg-github-canvas-inset border border-github-border-default rounded-md text-github-fg-default placeholder-github-fg-muted focus:outline-none focus:ring-2 focus:ring-github-accent-emphasis focus:border-transparent text-sm">
              <button data-action="add-tag" class="px-3 py-2 bg-github-accent-emphasis hover:bg-github-accent-fg text-white rounded-md text-sm font-medium transition-colors">
                Add
              </button>
            </div>
          </div>
          <p class="mt-1 text-xs text-github-fg-muted">Press Enter or click Add to add tags</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-github-fg-default mb-2">Initial content (optional)</label>
          <div id="initialContentEditor" class="border border-github-border-default rounded-sm h-20"></div>
        </div>
      </div>

      <div class="px-6 py-4 border-t border-github-border-default bg-github-canvas-subtle flex items-center justify-end space-x-3">
        <button data-action="hide-create-file-modal" class="px-4 py-2 border border-github-border-default rounded-md text-sm font-medium text-github-fg-default bg-github-btn-secondary-bg hover:bg-github-btn-secondary-hover transition-colors">
          Cancel
        </button>
        <button data-action="create-file" class="px-4 py-2 bg-github-btn-primary-bg hover:bg-github-btn-primary-hover text-white rounded-md text-sm font-medium transition-colors">
          Create file
        </button>
      </div>
    </div>
  </div>

<div id="deleteFileModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
    <div class="bg-github-canvas-overlay border border-github-border-default rounded-lg shadow-2xl w-full max-w-md animate-scale-in">
      <div class="px-6 py-4 border-b border-github-border-default">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold text-github-fg-default">Delete file</h3>
          <button data-action="hide-delete-file-modal" class="text-github-fg-muted hover:text-github-fg-default transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16">
              <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z" />
            </svg>
          </button>
        </div>
      </div>

      <div class="p-6">
        <p class="text-github-fg-default mb-4">Are you sure you want to delete <span id="fileToDeleteName" class="font-semibold">filename.ext</span>? This action cannot be undone.</p>
        <div class="flex items-center justify-end space-x-3">
          <button data-action="hide-delete-file-modal" class="px-4 py-2 border border-github-border-default rounded-md text-sm font-medium text-github-fg-default bg-github-btn-secondary-bg hover:bg-github-btn-secondary-hover transition-colors">
            Cancel
          </button>
          <button data-action="confirm-delete-file" class="px-4 py-2 bg-github-danger-fg hover:bg-red-600 text-white rounded-md text-sm font-medium transition-colors">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
<!-- E N D -- E N D -->



<!-- PopOver Element ----------------->
<div id="commitDropdown" class="dropdown-menu hide" role="menu">
    <div class="dropdown-header">
      <svg class="header-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" width="32" height="32">
        <path fill="currentColor" d="M64 48l112 0 0 88c0 39.8 32.2 72 72 72l88 0 0 240c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16zM224 67.9l92.1 92.1-68.1 0c-13.3 0-24-10.7-24-24l0-68.1zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-261.5c0-17-6.7-33.3-18.7-45.3L242.7 18.7C230.7 6.7 214.5 0 197.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
      </svg>
      <div class="save-info">
        <h4 class="save-title" id="popoverTitle">Add Commit & Save</h4>
        <p class="save-subtitle" id="popoverSubtitle">Enter a commit message before saving</p>
      </div>
    </div>
    
    <div class="commit-form">
      <div class="commit-input-group">
        <label for="commitMessage" class="commit-label">Commit Message</label>
        <textarea 
          id="commitMessage" 
          class="commit-textarea" 
          placeholder="Describe what you changed..."
          rows="3"
        ></textarea>
      </div>
      
      <div class="form-actions">
        <button id="commitCancelBtn" class="btn btn-secondary">Cancel</button>
        <button id="commitSaveBtn" class="btn btn-primary">Save Changes</button>
      </div>
    </div>
  </div>
<!-- E N D -- E N D -->


<!-------
     Left & Right Sidebars
                      ------->
<div id="overlay" class="fixed inset-0 bg-black"></div>
  <aside id="leftSidebar" class="sidebar left-sidebar">
    <div class="p-4 h-full overflow-y-auto">
      <!-- User Profile -->
      <div class="profile-section">
        <img src="https://dev.wuaze.com/banner.png" alt="Profile" class="profile-avatar" />
        <div class="profile-info">
          <h3 class="profile-name">GitDev</h3>
          <span class="profile-username">GitHub File Manager</span>
        </div>
        <!-- Files are stored directly in your GitHub repository -->
      </div>

      <!-- Quick Actions -->
      <div class="mb-6">
        <span class="sidebar-title">Quick Actions</span>
        <div class="space-y-1">
          <button data-action="create-file" class="sidebar-link">
            <i class="fas fa-file mr-2"></i>
            New File
          </button>
          <button data-action="show-repo-selector" data-spa-navigate="repo" href="#repo"class="sidebar-link">
            <i class="fas fa-folder mr-2"></i>
            Browse Repositories
          </button>
          <button data-action="navigate-root" class="sidebar-link">
            <i class="fas fa-home mr-2"></i>
            Go to Root
          </button>
        </div>
      </div>

      <!-- Repository List -->
      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <span class="sidebar-title">Repositories</span>
          <span id="repoCount" class="text-xs text-github-fg-muted">0</span>
        </div>
        <div id="repoListSidebar" class="space-y-1">
          <!-- Repositories will be populated here -->
        </div>
      </div>

      <!-- Navigation Links -->
      <div>
        <span class="sidebar-title">Navigation</span>
        <div class="space-y-1">
          <a href="#" data-navigate="repo" class="sidebar-link">
            <i class="fas fa-code mr-2"></i>
            Code
          </a>
          <a href="#" class="sidebar-link">
            <i class="fas fa-exclamation-circle mr-2"></i>
            Issues
            <span class="ml-auto bg-github-canvas-subtle text-github-fg-default text-xs px-1.5 py-0.5 rounded-full">0</span>
          </a>
          <a href="#" class="sidebar-link">
            <i class="fas fa-code-branch mr-2"></i>
            Pull Requests
            <span class="ml-auto bg-github-canvas-subtle text-github-fg-default text-xs px-1.5 py-0.5 rounded-full">0</span>
          </a>
          <a href="#" class="sidebar-link">
            <i class="fas fa-chart-bar mr-2"></i>
            Insights
          </a>
        </div>
      </div>

      <!-- File Stats -->
      <div class="mt-6 pt-4 border-t border-github-border-muted">
        <div class="flex items-center justify-between text-sm">
          <span class="text-github-fg-muted">Files:</span>
          <span id="totalFilesCount" class="font-medium">0</span>
        </div>
        <div class="flex items-center justify-between text-sm mt-1">
          <span class="text-github-fg-muted">Storage:</span>
          <span id="totalStorage" class="font-medium">0 KB</span>
        </div>
      </div>
    </div>
  </aside>
  <aside id="rightSidebar" class="sidebar right-sidebar">
    <div class="p-4 h-full overflow-y-auto">
      <!-- Recent Files -->
      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <span class="sidebar-title">Recent Files</span>
          <button onclick="refreshRecentFiles()" class="text-xs text-github-accent-fg hover:underline">
            Refresh
          </button>
        </div>
        <div id="recentFilesList" class="space-y-2">
          <!-- Recent files will be populated here -->
        </div>
      </div>

      <!-- Current Repository Info -->
      <div id="currentRepoInfo" class="mb-6 hidden">
        <span class="sidebar-title">Current Repository</span>
        <div class="p-3 bg-github-canvas-subtle rounded-md mt-2">
          <h4 id="currentRepoNameSidebar" class="font-semibold text-github-fg-default mb-1"></h4>
          <p id="currentRepoDesc" class="text-xs text-github-fg-muted mb-2"></p>
          <div class="flex items-center justify-between text-xs">
            <span class="text-github-fg-muted">Branch:</span>
            <span id="currentRepoBranch" class="font-medium">main</span>
          </div>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="mb-6">
        <span class="sidebar-title">Quick Stats</span>
        <div class="grid grid-cols-2 gap-2 mt-2">
          <div class="p-3 bg-github-canvas-subtle rounded-md text-center">
            <div class="text-lg font-semibold text-github-accent-fg" id="statsFiles">0</div>
            <div class="text-xs text-github-fg-muted">Files</div>
          </div>
          <div class="p-3 bg-github-canvas-subtle rounded-md text-center">
            <div class="text-lg font-semibold text-github-success-fg" id="statsCommits">0</div>
            <div class="text-xs text-github-fg-muted">Commits</div>
          </div>
          <div class="p-3 bg-github-canvas-subtle rounded-md text-center">
            <div class="text-lg font-semibold text-github-warning-fg" id="statsBranches">1</div>
            <div class="text-xs text-github-fg-muted">Branches</div>
          </div>
          <div class="p-3 bg-github-canvas-subtle rounded-md text-center">
            <div class="text-lg font-semibold text-github-danger-fg" id="statsIssues">0</div>
            <div class="text-xs text-github-fg-muted">Issues</div>
          </div>
        </div>
      </div>

      <!-- Language Distribution -->
      <div id="languageStatsSidebar" class="hidden">
        <span class="sidebar-title">Languages</span>
        <div id="languageStatsList" class="space-y-2 mt-2">
          <!-- Language stats will be populated here -->
        </div>
      </div>

      <!-- Quick Actions Footer -->
      <div class="mt-auto pt-4 border-t border-github-border-muted">
        <div class="space-y-2">
          <button onclick="toggleTheme()" class="sidebar-link w-full text-left">
            <i id="sidebarThemeIcon" class="fas fa-moon mr-2"></i>
            Toggle Theme
          </button>
          <button onclick="showHelp()" class="sidebar-link w-full text-left">
            <i class="fas fa-question-circle mr-2"></i>
            Help & Documentation
          </button>
        </div>
      </div>
    </div>
  </aside>



<script type="module" src="modules/index.js">
/**
 *  Main script
 */
</script>




<script id="sidebars">
const SidebarManager = {
  state: {
    isLeftSidebarOpen: false,
    isRightSidebarOpen: false,
    isDarkTheme: true,
    currentRepository: null,
    recentFiles: [],
    repositories: []
  },

  init() {
    this.setupEventListeners();
    this.loadData();
    this.checkWindowSize();
    this.setupAutoRefresh();
    this.updateRecentFiles();
    this.updateRepositoryList();
    this.updateStats();
  },

  setupEventListeners() {
    const leftSidebarTrigger = document.getElementById('leftSidebarTrigger');
    const rightSidebarTrigger = document.getElementById('rightSidebarTrigger');
    const overlay = document.getElementById('overlay');
    const body = document.body;

    if (leftSidebarTrigger) {
      leftSidebarTrigger.addEventListener('click', (e) => {
        e.stopPropagation();
        this.toggleLeftSidebar();
      });
    }

    if (rightSidebarTrigger) {
      rightSidebarTrigger.addEventListener('click', (e) => {
        e.stopPropagation();
        this.toggleRightSidebar();
      });
    }

    if (overlay) {
      overlay.addEventListener('click', () => {
        if (this.state.isLeftSidebarOpen) {
          this.closeLeftSidebar();
        }
        if (this.state.isRightSidebarOpen) {
          this.closeRightSidebar();
        }
      });
    }

    // Close sidebar with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (this.state.isLeftSidebarOpen) this.closeLeftSidebar();
        if (this.state.isRightSidebarOpen) this.closeRightSidebar();
      }
    });

    document.addEventListener('click', (e) => {
      if (window.innerWidth > 1200) return;
      
      const leftSidebar = document.getElementById('leftSidebar');
      const rightSidebar = document.getElementById('rightSidebar');
      const leftTrigger = document.getElementById('leftSidebarTrigger');
      const rightTrigger = document.getElementById('rightSidebarTrigger');
      
      const isClickOnLeftTrigger = e.target === leftTrigger || leftTrigger.contains(e.target);
      const isClickOnRightTrigger = e.target === rightTrigger || rightTrigger.contains(e.target);
      const isClickInLeftSidebar = leftSidebar && leftSidebar.contains(e.target);
      const isClickInRightSidebar = rightSidebar && rightSidebar.contains(e.target);
      
      if (this.state.isLeftSidebarOpen && !isClickInLeftSidebar && !isClickOnLeftTrigger) {
        this.closeLeftSidebar();
      }
      
      if (this.state.isRightSidebarOpen && !isClickInRightSidebar && !isClickOnRightTrigger) {
        this.closeRightSidebar();
      }
    });

    window.addEventListener('resize', () => {
      this.checkWindowSize();
    });
  },

  loadData() {
    try {
      this.state.recentFiles = JSON.parse(localStorage.getItem('gitcodr_recent_files') || '[]');
      this.state.repositories = JSON.parse(localStorage.getItem('gitcodr_repositories') || '[]');
    } catch (e) {
      this.state.recentFiles = [];
      this.state.repositories = [];
    }
  },

  toggleLeftSidebar() {
    if (window.innerWidth <= 1200) {
      if (this.state.isLeftSidebarOpen) {
        this.closeLeftSidebar();
      } else {
        this.openLeftSidebar();
      }
    }
  },

  toggleRightSidebar() {
    if (window.innerWidth <= 1200) {
      if (this.state.isRightSidebarOpen) {
        this.closeRightSidebar();
      } else {
        this.openRightSidebar();
      }
    }
  },

  openLeftSidebar() {
    const leftSidebar = document.getElementById('leftSidebar');
    const overlay = document.getElementById('overlay');
    const body = document.body;
    
    this.closeRightSidebar();
    
    this.state.isLeftSidebarOpen = true;
    leftSidebar.classList.add('open');
    overlay.classList.add('active');
    body.classList.add('sidebar-open');
  },

  openRightSidebar() {
    const rightSidebar = document.getElementById('rightSidebar');
    const overlay = document.getElementById('overlay');
    const body = document.body;
    
    this.closeLeftSidebar();
    
    this.state.isRightSidebarOpen = true;
    rightSidebar.classList.add('open');
    overlay.classList.add('active');
    body.classList.add('sidebar-open');
  },

  closeLeftSidebar() {
    const leftSidebar = document.getElementById('leftSidebar');
    const overlay = document.getElementById('overlay');
    const body = document.body;
    
    this.state.isLeftSidebarOpen = false;
    leftSidebar.classList.remove('open');
    
    if (!this.state.isRightSidebarOpen) {
      overlay.classList.remove('active');
      body.classList.remove('sidebar-open');
    }
  },

  closeRightSidebar() {
    const rightSidebar = document.getElementById('rightSidebar');
    const overlay = document.getElementById('overlay');
    const body = document.body;
    
    this.state.isRightSidebarOpen = false;
    rightSidebar.classList.remove('open');
    
    if (!this.state.isLeftSidebarOpen) {
      overlay.classList.remove('active');
      body.classList.remove('sidebar-open');
    }
  },

  checkWindowSize() {
    const leftSidebar = document.getElementById('leftSidebar');
    const rightSidebar = document.getElementById('rightSidebar');
    const overlay = document.getElementById('overlay');
    const mainContentWrapper = document.getElementById('mainArea');
    const body = document.body;
    
    if (window.innerWidth <= 1200) {
      leftSidebar.classList.remove('open');
      rightSidebar.classList.remove('open');
      this.state.isLeftSidebarOpen = false;
      this.state.isRightSidebarOpen = false;
      overlay.classList.remove('active');
      body.classList.remove('sidebar-open');
      
      if (mainContentWrapper) {
        mainContentWrapper.style.marginLeft = '0';
        mainContentWrapper.style.marginRight = '0';
      }
    } else {
      leftSidebar.classList.remove('open');
      rightSidebar.classList.remove('open');
      this.state.isLeftSidebarOpen = false;
      this.state.isRightSidebarOpen = false;
      overlay.classList.remove('active');
      body.classList.remove('sidebar-open');
      
      if (mainContentWrapper) {
        mainContentWrapper.style.marginLeft = 'var(--sidebar-width)';
        mainContentWrapper.style.marginRight = 'var(--sidebar-width)';
      }
    }
  },

  toggleTheme() {
    const html = document.documentElement;
    const themeIcons = document.querySelectorAll('#themeIcon, #sidebarThemeIcon');
    
    this.state.isDarkTheme = !this.state.isDarkTheme;
    
    if (this.state.isDarkTheme) {
      html.setAttribute('data-theme', 'dark');
      themeIcons.forEach(icon => {
        icon.className = 'fas fa-moon';
      });
    } else {
      html.setAttribute('data-theme', 'light');
      themeIcons.forEach(icon => {
        icon.className = 'fas fa-sun';
      });
    }
    
    localStorage.setItem('gitcodr_theme', this.state.isDarkTheme ? 'dark' : 'light');
  },

  updateRecentFiles() {
    const recentFilesList = document.getElementById('recentFilesList');
    if (!recentFilesList) return;
    
    this.loadData();
    
    if (this.state.recentFiles.length === 0) {
      recentFilesList.innerHTML = '<div class="text-center py-4 text-github-fg-muted text-sm"><i class="fas fa-file text-lg mb-2 block"></i>No recent files</div>';
    } else {
      recentFilesList.innerHTML = this.state.recentFiles.slice(0, 5).map(file => `<div class="recent-file-item" onclick="SidebarManager.openRecentFile('${file.repoName}', '${file.filePath}', '${file.fileName}')"><i class="fas fa-file recent-file-icon"></i><div class="flex-1 min-w-0"><div class="text-sm text-github-fg-default truncate">${file.fileName}</div><div class="text-xs text-github-fg-muted truncate">${file.repoName}</div></div><div class="text-xs text-github-fg-muted">${this.formatTimeAgo(file.timestamp)}</div></div>`).join('');
    }
  },

  updateRepositoryList() {
    const repoListSidebar = document.getElementById('repoListSidebar');
    const repoCount = document.getElementById('repoCount');
    
    if (!repoListSidebar) return;
    
    this.loadData();
    
    if (this.state.repositories.length === 0) {
      repoListSidebar.innerHTML = '<div class="text-center py-2 text-sm text-github-fg-muted">No repositories yet</div>';
    } else {
      repoListSidebar.innerHTML = this.state.repositories.map(repo => `<div class="repo-item ${this.state.currentRepository === repo.name ? 'active' : ''}" onclick="SidebarManager.selectRepository('${repo.name}')"><i class="fas fa-folder repo-icon ${repo.visibility === 'public' ? 'public' : ''}"></i><span class="flex-1 truncate">${repo.name}</span><span class="text-xs text-github-fg-muted">${this.formatDate(repo.created)}</span></div>`).join('');
    }
    
    if (repoCount) {
      repoCount.textContent = this.state.repositories.length.toString();
    }
  },

  updateStats() {
    const totalFilesCount = document.getElementById('totalFilesCount');
    const totalStorage = document.getElementById('totalStorage');
    const currentRepoNameSidebar = document.getElementById('currentRepoNameSidebar');
    const currentRepoDesc = document.getElementById('currentRepoDesc');
    const currentRepoInfo = document.getElementById('currentRepoInfo');
    const statsFiles = document.getElementById('statsFiles');
    const statsCommits = document.getElementById('statsCommits');
    const statsBranches = document.getElementById('statsBranches');
    const statsIssues = document.getElementById('statsIssues');
    
    let totalFiles = 0;
    let totalSize = 0;
    
    this.state.repositories.forEach(repo => {
      try {
        const repoData = JSON.parse(localStorage.getItem(`gitcodr_repo_${repo.name}`) || '{}');
        const fileCount = Object.keys(repoData).length;
        totalFiles += fileCount;
        
        Object.values(repoData).forEach(file => {
          totalSize += file.size || 0;
        });
      } catch (e) {
        console.warn(`Error processing repo ${repo.name}:`, e);
      }
    });
    
    if (totalFilesCount) totalFilesCount.textContent = totalFiles.toString();
    if (totalStorage) totalStorage.textContent = this.formatFileSize(totalSize);
    if (statsFiles) statsFiles.textContent = totalFiles.toString();
    if (statsCommits) statsCommits.textContent = Math.floor(totalFiles * 1.5).toString();
    if (statsBranches) statsBranches.textContent = this.state.repositories.length.toString();
    if (statsIssues) statsIssues.textContent = '0';
    
    if (this.state.currentRepository) {
      const repo = this.state.repositories.find(r => r.name === this.state.currentRepository);
      if (repo) {
        if (currentRepoNameSidebar) currentRepoNameSidebar.textContent = repo.name;
        if (currentRepoDesc) currentRepoDesc.textContent = repo.description || 'No description';
        if (currentRepoInfo) currentRepoInfo.classList.remove('hidden');
      }
    } else {
      if (currentRepoInfo) currentRepoInfo.classList.add('hidden');
    }
  },

  selectRepository(repoName) {
    this.state.currentRepository = repoName;
    this.updateRepositoryList();
    this.updateStats();
    
    if (typeof openRepository === 'function') {
      openRepository(repoName);
    }
    
    if (window.innerWidth <= 1200) {
      this.closeLeftSidebar();
    }
  },

  openRecentFile(repoName, filePath, fileName) {
    this.state.currentRepository = repoName;
    this.updateRepositoryList();
    this.updateStats();
    
    if (typeof openRecentFile === 'function') {
      openRecentFile(repoName, filePath, fileName);
    }
    
    if (window.innerWidth <= 1200) {
      this.closeRightSidebar();
    }
  },

  refreshRecentFiles() {
    this.loadData();
    this.updateRecentFiles();
  },

  addToRecentFiles(fileName, repoName, filePath) {
    const existingIndex = this.state.recentFiles.findIndex(f => f.filePath === filePath && f.repoName === repoName);
    
    if (existingIndex !== -1) {
      this.state.recentFiles.splice(existingIndex, 1);
    }
    
    this.state.recentFiles.unshift({
      fileName,
      repoName,
      filePath,
      timestamp: Date.now()
    });
    
    if (this.state.recentFiles.length > 10) {
      this.state.recentFiles = this.state.recentFiles.slice(0, 10);
    }
    
    localStorage.setItem('gitcodr_recent_files', JSON.stringify(this.state.recentFiles));
    this.updateRecentFiles();
  },

  setupAutoRefresh() {
    setInterval(() => {
      this.loadData();
      this.updateRecentFiles();
      this.updateRepositoryList();
      this.updateStats();
    }, 30000);
  },

  formatDate(timestamp) {
    if (!timestamp) return '';
    const date = new Date(timestamp);
    return date.toLocaleDateString();
  },

  formatTimeAgo(timestamp) {
    if (!timestamp) return '';
    const now = new Date();
    const date = new Date(timestamp);
    const diff = now - date;
    
    if (diff < 60000) return 'now';
    if (diff < 3600000) return Math.floor(diff / 60000) + 'm';
    if (diff < 86400000) return Math.floor(diff / 3600000) + 'h';
    if (diff < 604800000) return Math.floor(diff / 86400000) + 'd';
    return Math.floor(diff / 604800000) + 'w';
  },

  formatFileSize(bytes) {
    if (typeof bytes !== 'number') return '0 KB';
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    if (bytes === 0) return '0 Bytes';
    const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
    return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];
  },

  updateAll() {
    this.loadData();
    this.updateRecentFiles();
    this.updateRepositoryList();
    this.updateStats();
  },

  setCurrentRepository(repoName) {
    this.state.currentRepository = repoName;
    this.updateRepositoryList();
    this.updateStats();
  }
};

document.addEventListener('DOMContentLoaded', () => {
  SidebarManager.init();
  
  const savedTheme = localStorage.getItem('gitcodr_theme');
  if (savedTheme === 'light') {
    SidebarManager.state.isDarkTheme = false;
    SidebarManager.toggleTheme();
  }
});

function updateSidebarAfterFileOperation(repoName, fileName, filePath) {
  if (SidebarManager) {
    SidebarManager.addToRecentFiles(fileName, repoName, filePath);
    SidebarManager.updateStats();
  }
}

function updateSidebarAfterRepoOperation() {
  if (SidebarManager) {
    SidebarManager.updateRepositoryList();
    SidebarManager.updateStats();
  }
}
</script>



<script id="serviceWorker">
class ServiceWorkerManager {
    constructor() {
        this.registration = null;
        this.init();
    }
    
    async init() {
        if ('serviceWorker' in navigator) {
            await this.register();
            this.setupListeners();
        }
    }
    
    async register() {
        try {
            this.registration = await navigator.serviceWorker.register('https://clockblocked.github.io/bytes/webApp/serviceWorker.js', {
                scope: '/',
                updateViaCache: 'all'
            });
            
            console.log('‚úÖ Service Worker registered:', this.registration);
            
            if (this.registration.waiting) {
                this.showUpdateReady();
            }
            
            return this.registration;
        } catch (error) {
            console.error('‚ùå Service Worker registration failed:', error);
            return null;
        }
    }
    
    setupListeners() {
        this.registration.addEventListener('updatefound', () => {
            const newWorker = this.registration.installing;
            console.log('üîÑ Update found, installing new Service Worker');
            
            newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed') {
                    if (navigator.serviceWorker.controller) {
                        this.showUpdateReady();
                    } else {
                        console.log('‚úÖ Content is cached for offline use.');
                    }
                }
            });
        });
        
        navigator.serviceWorker.addEventListener('controllerchange', () => {
            console.log('üéÆ New Service Worker controlling the page');
        });
        
        navigator.serviceWorker.addEventListener('message', event => {
            this.handleMessage(event.data);
        });
    }
    
    showUpdateReady() {
        const updateDialog = document.createElement('div');
        updateDialog.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: #238636;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 1rem;
            max-width: 400px;
        `;
        
        updateDialog.innerHTML = `
            <span>üîÑ New version available</span>
            <button style="
                background: white;
                color: #238636;
                border: none;
                padding: 0.5rem 1rem;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
            ">Update</button>
            <button style="
                background: transparent;
                color: white;
                border: 1px solid white;
                padding: 0.5rem;
                border-radius: 4px;
                cursor: pointer;
            ">√ó</button>
        `;
        
        document.body.appendChild(updateDialog);
        
        const updateBtn = updateDialog.querySelector('button');
        const closeBtn = updateDialog.querySelector('button:last-child');
        
        updateBtn.addEventListener('click', () => {
            if (this.registration.waiting) {
                this.registration.waiting.postMessage({ type: 'SKIP_WAITING' });
            }
            window.location.reload();
        });
        
        closeBtn.addEventListener('click', () => {
            updateDialog.remove();
        });
    }
    
    handleMessage(data) {
        console.log('üì® Message from Service Worker:', data);
        
        switch (data.type) {
            case 'CACHE_UPDATED':
                console.log('Cache updated:', data.payload);
                break;
            case 'OFFLINE':
                this.showOfflineWarning();
                break;
        }
    }
    
    showOfflineWarning() {
        const indicator = document.createElement('div');
        indicator.id = 'offline-indicator';
        indicator.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #f0ad4e;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            z-index: 9998;
        `;
        indicator.textContent = '‚ö†Ô∏è Offline';
        document.body.appendChild(indicator);
        
        setTimeout(() => indicator.remove(), 3000);
    }
    
    async checkForUpdates() {
        if (this.registration) {
            await this.registration.update();
        }
    }
    
    async unregister() {
        if (this.registration) {
            const unregistered = await this.registration.unregister();
            console.log('Service Worker unregistered:', unregistered);
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    swManager = new ServiceWorkerManager();
    
    const installBtn = document.createElement('button');
    installBtn.id = 'pwa-install-btn';
    installBtn.innerHTML = 'üì± Install App';
    installBtn.style.cssText = `
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: #58a6ff;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        cursor: pointer;
        z-index: 9997;
        display: none;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    `;
    document.body.appendChild(installBtn);
});

let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    
    const installBtn = document.getElementById('pwa-install-btn');
    if (installBtn) {
        installBtn.style.display = 'block';
        
        installBtn.addEventListener('click', async () => {
            installBtn.style.display = 'none';
            
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`User response to install prompt: ${outcome}`);
                deferredPrompt = null;
            }
        });
    }
});

window.addEventListener('appinstalled', () => {
    console.log('PWA installed successfully');
    const installBtn = document.getElementById('pwa-install-btn');
    if (installBtn) installBtn.style.display = 'none';
});
</script>  


<script id="share">
    if (window.location.search.includes('share')) {
        window.addEventListener('load', async () => {
            const formData = await getSharedData();
            if (formData) {
                handleSharedFiles(formData);
            }
        });
    }

    async function getSharedData() {
        // process files shared via Web Share Target API
    }

    function handleSharedFiles(formData) {
        // Process and upload shared files
        console.log('Processing shared files...');
    }
</script>


<script id="debugger" src="https://cdn.jsdelivr.net/npm/eruda">
/**
 *  E R U D A
 */
</script>
<script>
eruda.init();
</script>






</body>
</html>